<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNK4X8M');</script><script src="https://use.fontawesome.com/c72bfae6f9.js"></script><link rel="preload" href="/component---src-layouts-index-js-d940cd9599529ddd8baf.js" as="script"/><link rel="preload" href="/component---src-templates-page-js-33e8d0aada832d25cdd4.js" as="script"/><link rel="preload" href="/path---postgraphile-computed-columns-02de9fddc3efacf1d473.js" as="script"/><link rel="preload" href="/app-83575228633057078df9.js" as="script"/><link rel="preload" href="/commons-af24df79ddc393e5cf48.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-83575228633057078df9.js","3918056598153407000":"component---src-templates-marketing-js-f1a629dc3896579cad71.js","6354438848726490000":"component---src-templates-page-js-33e8d0aada832d25cdd4.js","3954140758598355500":"path----557518bd178906f8d58a.js","3000790572835897000":"path---history-a9de9ada75a9d2d5e212.js","9347362237655822000":"path---index-9fd1b417297ca7f44762.js","9284278481446570000":"path---support-8b9ef0121fe4fe17062a.js","8428063392933112000":"path---graphile-build-all-hooks-528ec0dee33d2b333070.js","4555055688090620000":"path---graphile-build-context-object-a316f16109a9e4829a67.js","7205504750529626000":"path---graphile-build-getting-started-b0cc4ed25589fa58840e.js","8250511738979511000":"path---graphile-build-default-plugins-12cfcc554ec0cba6d96e.js","4195836923314832400":"path---graphile-build-build-object-39a355f2444936599dcf.js","1062387460204904600":"path---graphile-build-graphile-build-617af6d18e98b570fbd4.js","2390399147881533400":"path---graphile-build-omitting-plugins-d94fb5818e94cfb3bacb.js","7184560962273474000":"path---graphile-build-32a58b408c083fbb9106.js","3771791408109622300":"path---graphile-build-hooks-075497e70bd9c0df5f36.js","5002895319514266000":"path---graphile-build-look-ahead-87787d572c22333f1da1.js","18184767599037770000":"path---graphile-build-schema-builder-f81f70eae82bfd037e12.js","18106655623105920000":"path---graphile-build-plugin-options-3399c5e18dc1446c792c.js","13726931753980498000":"path---postgraphile-custom-mutations-6fd2c340dc6feded7410.js","16069087941836857000":"path---postgraphile-connections-71b897c11768b4352f7b.js","8948711028338852000":"path---graphile-build-plugins-86a094782a33d62c7479.js","6515005643110327000":"path---postgraphile-computed-columns-02de9fddc3efacf1d473.js","14828157494412298000":"path---postgraphile-crud-mutations-1c8ddaa0e3d9666d158b.js","3021897627100894700":"path---postgraphile-evaluating-c71dad471e4af5780612.js","17185268450471195000":"path---postgraphile-custom-queries-e91d618871285ecb12fb.js","11994700922543962000":"path---postgraphile-default-role-040acd8897f496306bc2.js","1943873715935326000":"path---postgraphile-filtering-f75cfd3e77eaa259bba8.js","3195847254699379700":"path---postgraphile-e3fd986d70e9f7458ea4.js","2227050697239772200":"path---postgraphile-introspection-8443a6755edff30e9619.js","96033804396543090":"path---postgraphile-extending-74a7bf81a921a0bf4887.js","15157997279410745000":"path---postgraphile-introduction-1e27e7e2388254f2b77e.js","16111252123784985000":"path---postgraphile-performance-8198ae19bb72e4d16baa.js","14254897639210230000":"path---postgraphile-jwt-guide-e941f570895306e2d229.js","8958514494574895000":"path---postgraphile-relations-8053dd5c107ae2266a81.js","2838144339183239000":"path---postgraphile-postgresql-indexes-02f09469569398392693.js","16885969067605012000":"path---postgraphile-procedures-6780bd4d0e4f04823c31.js","9703967671503860000":"path---postgraphile-usage-library-2d538166012dfff74567.js","1169112013285621200":"path---postgraphile-postgresql-schema-design-4ef86a19f52acaaff8c7.js","9432930456023296000":"path---postgraphile-security-ac2dbab469cceb3afc65.js","12274565075711388000":"path---postgraphile-requirements-c954a4cda9bf215a5805.js","16226825268806257000":"path---postgraphile-usage-10f9c4186963a6471a6b.js","17830146079722576000":"path---postgraphile-usage-schema-9276867e6e7878dfd9cd.js","214018445676298080":"path---postgraphile-usage-cli-99f89081bd68d3d84225.js","8772566600393005000":"path---postgraphile-settings-b929481a2a10187ed0d2.js","12610637221850356000":"path---graphile-build-pg-security-492921c2b047fef2d600.js","7489246917808536000":"component---src-layouts-index-js-d940cd9599529ddd8baf.js"}
            //]]>
            </script><title data-react-helmet="true">Graphile | Computed Columns</title><meta data-react-helmet="true" name="description" content="Utilities to build powerful and performant GraphQL APIs"/><meta data-react-helmet="true" name="keywords" content="GraphQL, API, Graph, PostgreSQL, PostGraphQL, server, plugins, introspection, reflection"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = location.hash.replace('#', '')
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-af24df79ddc393e5cf48.js","/app-83575228633057078df9.js","/path---postgraphile-computed-columns-02de9fddc3efacf1d473.js","/component---src-templates-page-js-33e8d0aada832d25cdd4.js","/component---src-layouts-index-js-d940cd9599529ddd8baf.js"
])
  </script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.45em 'Quattrocento Sans','serif';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Quattrocento Sans','serif';font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans','sans-serif';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans','sans-serif';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans','sans-serif';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans','sans-serif';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans','sans-serif';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans','sans-serif';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:1.45rem;margin-right:1.45rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{text-shadow:initial;color:initial;background-color:initial;}</style><link href="//fonts.googleapis.com/css?family=Work+Sans:600|Quattrocento+Sans:400,400i,700" rel="stylesheet" type="text/css"/><link rel="stylesheet" href="/styles.css?t=2017-08-24T07-56-10.657Z"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNK4X8M" height="0" width="0" style="display:none;visibility:hidden;"></iframe></noscript><div id="___gatsby"><div tabindex="-1" data-reactroot="" data-reactid="1" data-react-checksum="-239544788"><div class="template-page" data-reactid="2"><!-- react-empty: 3 --><header class="content" data-reactid="4"><nav class="navbar" data-reactid="5"><div class="container" data-reactid="6"><input type="checkbox" class="navbar-toggler" id="toggle" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" data-reactid="7"/><div class="nav-controls" data-reactid="8"><div class="navbar-crosses" data-reactid="9"><span class="line line-1" data-reactid="10"> </span><span class="line line-2" data-reactid="11"> </span><span class="line line-3" data-reactid="12"> </span></div><ul class="navbar-nav" data-reactid="13"><li class="navbar-item navbar-item--left" data-reactid="14"><a class="nav-link " href="/" data-reactid="15"><span class="fa fa-home" data-reactid="16"></span><!-- react-text: 17 --> <!-- /react-text --><span class="home" data-reactid="18">Home</span></a></li><li class="navbar-item navbar-item--left" data-reactid="19"><a class="nav-link active" href="/postgraphile/" data-reactid="20">PostGraphile</a></li><li class="navbar-item navbar-item--left" data-reactid="21"><a class="nav-link " href="/graphile-build/" data-reactid="22">Graphile Build</a></li><li class="navbar-item navbar-item--left" data-reactid="23"><a class="nav-link " href="/support/" data-reactid="24">Support</a></li><li class="navbar-item ml-auto navbar-item navbar-item--right" data-reactid="25"><span class="searchbox-container" data-reactid="26"><input id="search-box" placeholder="Search" data-reactid="27"/><span class="fa fa-search searchbox-search" data-reactid="28"></span></span></li><li class="navbar-item navbar-item--right" data-reactid="29"><a class="nav-github-link nav-link" href="https://github.com/graphile/graphile-build" data-reactid="30"><span class="fa fa-github" data-reactid="31"></span><!-- react-text: 32 --> <!-- /react-text --><span class="github" data-reactid="33">Github</span></a></li></ul></div></div></nav></header><div class="page-content" data-reactid="34"><section data-reactid="35"><div class="container" data-reactid="36"><div class="row between-xs" data-reactid="37"><aside class="sidebar col-xs-12 col-md-3 last-xs" data-reactid="38"><section data-reactid="39"><h4 class="sidebar-title" data-reactid="40">Overview</h4><ul class="page-list nav flex-column" data-reactid="41"><li class="nav-item" data-reactid="42"><a class="nav-link " href="/postgraphile/introduction/" data-reactid="43">Introduction</a></li><li class="nav-item" data-reactid="44"><a class="nav-link " href="/postgraphile/requirements/" data-reactid="45">Requirements</a></li><li class="nav-item" data-reactid="46"><a class="nav-link " href="/postgraphile/performance/" data-reactid="47">Performance</a></li><li class="nav-item" data-reactid="48"><a class="nav-link " href="/postgraphile/connections/" data-reactid="49">Connections</a></li><li class="nav-item" data-reactid="50"><a class="nav-link " href="/postgraphile/filtering/" data-reactid="51">Filtering</a></li><li class="nav-item" data-reactid="52"><a class="nav-link " href="/postgraphile/relations/" data-reactid="53">Relations</a></li><li class="nav-item" data-reactid="54"><a class="nav-link " href="/postgraphile/crud-mutations/" data-reactid="55">CRUD Mutations</a></li><li class="nav-item" data-reactid="56"><a class="nav-link active" href="/postgraphile/computed-columns/" data-reactid="57">Computed Columns</a></li><li class="nav-item" data-reactid="58"><a class="nav-link " href="/postgraphile/custom-queries/" data-reactid="59">Custom Queries</a></li><li class="nav-item" data-reactid="60"><a class="nav-link " href="/postgraphile/custom-mutations/" data-reactid="61">Custom Mutations</a></li><li class="nav-item" data-reactid="62"><a class="nav-link " href="/postgraphile/security/" data-reactid="63">Security</a></li><li class="nav-item" data-reactid="64"><a class="nav-link " href="/postgraphile/introspection/" data-reactid="65">Introspection</a></li><li class="nav-item" data-reactid="66"><a class="nav-link " href="/postgraphile/extending/" data-reactid="67">Extending PostGraphile</a></li></ul></section><section data-reactid="68"><h4 class="sidebar-title" data-reactid="69">Guides</h4><ul class="page-list nav flex-column" data-reactid="70"><li class="nav-item" data-reactid="71"><a class="nav-link " href="/postgraphile/evaluating/" data-reactid="72">Evaluating for your Project</a></li><li class="nav-item" data-reactid="73"><a class="nav-link " href="/postgraphile/jwt-guide/" data-reactid="74">PostGraphile JWT Guide</a></li><li class="nav-item" data-reactid="75"><a class="nav-link " href="/postgraphile/default-role/" data-reactid="76">The Default Role</a></li><li class="nav-item" data-reactid="77"><a class="nav-link " href="/postgraphile/procedures/" data-reactid="78">PostgreSQL Procedures</a></li><li class="nav-item" data-reactid="79"><a class="nav-link " href="/postgraphile/postgresql-schema-design/" data-reactid="80">PostgreSQL Schema Design</a></li><li class="nav-item" data-reactid="81"><a class="nav-link " href="/postgraphile/postgresql-indexes/" data-reactid="82">PostgreSQL Indexes</a></li></ul></section><section data-reactid="83"><h4 class="sidebar-title" data-reactid="84">Usage</h4><ul class="page-list nav flex-column" data-reactid="85"><li class="nav-item" data-reactid="86"><a class="nav-link " href="/postgraphile/usage-cli/" data-reactid="87">CLI Usage</a></li><li class="nav-item" data-reactid="88"><a class="nav-link " href="/postgraphile/usage-library/" data-reactid="89">Library Usage</a></li><li class="nav-item" data-reactid="90"><a class="nav-link " href="/postgraphile/usage-schema/" data-reactid="91">Schema-only Usage</a></li></ul></section></aside><div class="col-xs-12 col-md-9 first-xs main-content" data-reactid="92"><div class="row" data-reactid="93"><div class="col-xs-12" style="width:100%;" data-reactid="94"><h2 id="computed-columns"><a href="#computed-columns" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Computed Columns</h2>
<p>Not all the data returned from PostGraphile has to be concrete data in your
database, we also support computing data on the fly. An example of this is our
"computed columns" feature where you can add what appears to be an extra column
(field) to the GraphQL type that represents your table which is actually
calculated by calling a function. We inline this function call into the
original select statement, so there's no N+1 issues with this - it's very
efficient.</p>
<p>You can create PostgreSQL functions that match the following criteria to add a
field to a table type. This field could be simple (such as <code>name</code> constructed
from <code>first_name || ' ' || last_name</code>) or could return a composite type (e.g.
database row) or even a whole connection. For this to work, the following rules
apply to the function you create:</p>
<ul>
<li>name must begin with the name of the table it applies to, followed by an underscore (<code>_</code>)</li>
<li>first argument must be the table type</li>
<li>must return a named type - we do not currently support anonymous types</li>
<li>must NOT return <code>VOID</code></li>
<li>must be marked as <code>STABLE</code></li>
<li>must be defined in the same schema as the table</li>
</ul>
<h3 id="example"><a href="#example" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>This example creates two computed columns, one returning a simple varchar and
the other a connection. Note that these methods could also accept additional
arguments which would also automatically be added to the generated GraphQL
field:</p>
<div class="gatsby-highlight">
      <pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> my_schema<span class="token punctuation">.</span>users <span class="token punctuation">(</span>
  id <span class="token keyword">serial</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
  first_name <span class="token keyword">varchar</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  last_name <span class="token keyword">varchar</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> my_schema<span class="token punctuation">.</span>friendships <span class="token punctuation">(</span>
  user_id <span class="token keyword">integer</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  target_id <span class="token keyword">integer</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> target_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">function</span> my_schema<span class="token punctuation">.</span>users_name<span class="token punctuation">(</span>u my_schema<span class="token punctuation">.</span>users<span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">varchar</span> <span class="token keyword">as</span> $$
  <span class="token keyword">select</span> u<span class="token punctuation">.</span>first_name <span class="token operator">||</span> <span class="token string">' '</span> <span class="token operator">||</span> u<span class="token punctuation">.</span>last_name<span class="token punctuation">;</span>
$$ <span class="token keyword">language sql</span> stable<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">function</span> my_schema<span class="token punctuation">.</span>users_friends<span class="token punctuation">(</span>u my_schema<span class="token punctuation">.</span>users<span class="token punctuation">)</span>
<span class="token keyword">returns</span> setof my_schema<span class="token punctuation">.</span>users <span class="token keyword">as</span> $$
  <span class="token keyword">select</span> <span class="token operator">*</span>
  <span class="token keyword">from</span> my_schema<span class="token punctuation">.</span>users
  <span class="token keyword">inner</span> <span class="token keyword">join</span> my_schema<span class="token punctuation">.</span>friendships
  <span class="token keyword">on</span> <span class="token punctuation">(</span>friendships<span class="token punctuation">.</span>target_id <span class="token operator">=</span> users<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token keyword">where</span> friendships<span class="token punctuation">.</span>user_id <span class="token operator">=</span> u<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
$$ <span class="token keyword">language sql</span> stable<span class="token punctuation">;</span>
</code></pre>
      </div>
<p>TODO: ensure this example works</p></div><br data-reactid="95"/><br data-reactid="96"/><div class="col-xs-12" data-reactid="97"><div class="row between-xs" data-reactid="98"><div class="col-xs-6" data-reactid="99"><a class="btn btn-secondary btn-large" href="/postgraphile/crud-mutations/" data-reactid="100"><!-- react-text: 101 -->← <!-- /react-text --><!-- react-text: 102 -->CRUD Mutations<!-- /react-text --></a></div><div class="col-xs-6 right" data-reactid="103"><a class="btn btn-primary btn-large" href="/postgraphile/custom-queries/" data-reactid="104"><!-- react-text: 105 -->Custom Queries<!-- /react-text --><!-- react-text: 106 --> →<!-- /react-text --></a></div></div></div></div></div></div></div></section></div><footer data-reactid="107"><div class="container" data-reactid="108"><div class="row justify-content-center" data-reactid="109"><div class="col-xs-12 col-md-1-5" data-reactid="110"></div><div class="col-xs-12 col-md-8" data-reactid="111"><div class="container" data-reactid="112"><div class="row" data-reactid="113"><div class="col-xs-12 col-md-4" data-reactid="114"><h6 data-reactid="115">PostGraphile</h6><ul data-reactid="116"><li data-reactid="117"><a href="/postgraphile/" data-reactid="118">About</a></li><li data-reactid="119"><a href="/postgraphile/introduction/" data-reactid="120">Introduction</a></li><li data-reactid="121"><a href="/postgraphile/security/" data-reactid="122">Security</a></li></ul></div><div class="col-xs-12 col-md-4" data-reactid="123"><h6 data-reactid="124">Graphile Build</h6><ul data-reactid="125"><li data-reactid="126"><a href="/graphile-build/" data-reactid="127">About</a></li><li data-reactid="128"><a href="/graphile-build/getting-started/" data-reactid="129">Getting Started</a></li><li data-reactid="130"><a href="/graphile-build/plugins/" data-reactid="131">Plugins</a></li></ul></div><div class="col-xs-12 col-md-4" data-reactid="132"><h6 data-reactid="133">Community</h6><ul data-reactid="134"><li data-reactid="135"><a href="https://github.com/graphile" data-reactid="136">GitHub</a></li><li data-reactid="137"><a href="https://gitter.im/postgraphql/postgraphql" data-reactid="138">Gitter chat</a></li><li data-reactid="139"><a href="https://twitter.com/benjie" data-reactid="140">Twitter</a></li></ul></div></div></div></div></div><div class="row copyright justify-content-center" data-reactid="141"><div class="col-xs-12 col-md-8 center italic" data-reactid="142"><!-- react-text: 143 -->PostGraphile and Graphile Build are Open Source Software, maintained by <!-- /react-text --><a href="https://twitter.com/benjie" data-reactid="144">Benjie Gillam</a><!-- react-text: 145 -->.<!-- /react-text --><br data-reactid="146"/><!-- react-text: 147 -->PostGraphile was <!-- /react-text --><a href="/history/" data-reactid="148">originally authored</a><!-- react-text: 149 --> as PostGraphQL by<!-- /react-text --><!-- react-text: 150 --> <!-- /react-text --><a href="https://twitter.com/calebmer" data-reactid="151">Caleb Meredith</a><!-- react-text: 152 -->.<!-- /react-text --><br data-reactid="153"/><br data-reactid="154"/><!-- react-text: 155 -->This site is copyright © Benjie Gillam 2017.<!-- /react-text --></div></div></div></footer></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script></body></html>