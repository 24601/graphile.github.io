<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNK4X8M');</script><script src="https://use.fontawesome.com/c72bfae6f9.js"></script><link rel="preload" href="/component---src-layouts-index-js-53c26317295bc637138f.js" as="script"/><link rel="preload" href="/component---src-templates-page-js-ec852048c4e46c858b13.js" as="script"/><link rel="preload" href="/path---graphile-build-look-ahead-d3a6d9b88774cdb80982.js" as="script"/><link rel="preload" href="/app-18e5b198cd6a20a643d7.js" as="script"/><link rel="preload" href="/commons-3596aa1ab404ed60101f.js" as="script"/><title data-react-helmet="true">Graphile | Look Ahead</title><meta data-react-helmet="true" name="description" content="Utilities to build powerful and performant GraphQL APIs"/><meta data-react-helmet="true" name="keywords" content="GraphQL, API, Graph, PostgreSQL, PostGraphile, PostGraphQL, Postgres-GraphQL, server, plugins, introspection, reflection"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><link rel="stylesheet" href="/styles.css?t=2018-09-21T09-55-43.041Z"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNK4X8M" height="0" width="0" style="display:none;visibility:hidden;"></iframe></noscript><div id="___gatsby"><div tabindex="-1" data-reactroot="" data-reactid="1" data-react-checksum="-836329803"><div class="template-page " data-reactid="2"><!-- react-empty: 3 --><header class="header content absolute z-999 w-100" data-reactid="4"><nav class="navbar" data-reactid="5"><div class="container" data-reactid="6"><input type="checkbox" class="navbar-toggler input-reset" id="toggle" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" data-reactid="7"/><div class="nav-controls nested-list-reset " data-reactid="8"><div class="navbar-crosses" data-reactid="9"><span class="line line-1" data-reactid="10"> </span><span class="line line-2" data-reactid="11"> </span><span class="line line-3" data-reactid="12"> </span></div><ul class="navbar-nav flex w-100" data-reactid="13"><li class="navbar-item" data-reactid="14"><a class="nav-link " href="/" data-reactid="15"><span class="home-icon fa fa-home" data-reactid="16"></span><!-- react-text: 17 --> <!-- /react-text --><span class="home" data-reactid="18">Home</span></a></li><!-- react-empty: 19 --><!-- react-empty: 20 --><!-- react-empty: 21 --><!-- react-empty: 22 --><!-- react-empty: 23 --><!-- react-empty: 24 --><li class="navbar-item" data-reactid="25"><a class="nav-link " href="/graphile-build/" data-reactid="26">Overview</a></li><li class="navbar-item" data-reactid="27"><a class="nav-link active" href="/graphile-build/getting-started/" data-reactid="28">Documentation</a></li><li class="navbar-item" data-reactid="29"><a class="nav-link" href="/postgraphile/" data-reactid="30">PostGraphile</a></li><li class="navbar-item ml-auto navbar-item-right" data-reactid="31"><span class="searchbox-container" data-reactid="32"><input id="search-box" placeholder="Search" data-reactid="33"/><span class="fa fa-search searchbox-search" data-reactid="34"></span></span></li><li class="navbar-item navbar-item-right" data-reactid="35"><a class="nav-link " href="/support/" data-reactid="36">Services</a></li><li class="navbar-item navbar-item-right hide-when-small" data-reactid="37"><a class="nav-link" href="https://graphql-training.com" title="GraphQL Training in London, Europe and Remote" data-reactid="38"><!-- react-text: 39 -->GraphQL Training<!-- /react-text --><!-- react-text: 40 --> <!-- /react-text --><span class="fa fa-external-link-square" data-reactid="41"></span></a></li><li class="navbar-item navbar-item-right" data-reactid="42"><a class="nav-link nav-github-link flex items-center" href="https://github.com/graphile/graphile-build" data-reactid="43"><span class="f3 fa fa-github" data-reactid="44"></span><!-- react-text: 45 --> <!-- /react-text --><span class="github" data-reactid="46"><!-- react-text: 47 -->Github <!-- /react-text --><span class="fa fa-external-link-square" data-reactid="48"></span></span></a></li></ul></div></div></nav></header><div class="page-content" data-reactid="49"><section data-reactid="50"><div class="container" data-reactid="51"><div class="row between-xs" data-reactid="52"><aside class="sidebar col-xs-12 col-md-3 last-xs mt3" data-reactid="53"><section data-reactid="54"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="55"><span data-reactid="56">Overview</span></h4><div class="nested-list-reset" data-reactid="57"><ul class="page-list nav flex-column mb5" data-reactid="58"><li class="f6 lh-copy pv1" data-reactid="59"><a class="nav-link " href="/graphile-build/getting-started/" data-reactid="60"><span data-reactid="61">Getting Started</span></a></li><li class="f6 lh-copy pv1" data-reactid="62"><a class="nav-link " href="/graphile-build/plugins/" data-reactid="63"><span data-reactid="64">Plugins</span></a></li><li class="f6 lh-copy pv1" data-reactid="65"><a class="nav-link " href="/graphile-build/hooks/" data-reactid="66"><span data-reactid="67">Hooks</span></a></li><li class="f6 lh-copy pv1" data-reactid="68"><a class="nav-link active" href="/graphile-build/look-ahead/" data-reactid="69"><span data-reactid="70">Look Ahead</span></a></li><li class="f6 lh-copy pv1" data-reactid="71"><a class="nav-link " href="/graphile-build/omitting-plugins/" data-reactid="72"><span data-reactid="73">Omitting Plugins</span></a></li></ul></div></section><section data-reactid="74"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="75"><span data-reactid="76">Using the Library</span></h4><div class="nested-list-reset" data-reactid="77"><ul class="page-list nav flex-column mb5" data-reactid="78"><li class="f6 lh-copy pv1" data-reactid="79"><a class="nav-link " href="/graphile-build/graphile-build/" data-reactid="80"><span data-reactid="81">graphile-build</span></a></li><li class="f6 lh-copy pv1" data-reactid="82"><a class="nav-link " href="/graphile-build/schema-builder/" data-reactid="83"><span data-reactid="84">SchemaBuilder</span></a></li><li class="f6 lh-copy pv1" data-reactid="85"><a class="nav-link " href="/graphile-build/plugin-options/" data-reactid="86"><span data-reactid="87">Options</span></a></li><li class="f6 lh-copy pv1" data-reactid="88"><a class="nav-link " href="/graphile-build/default-plugins/" data-reactid="89"><span data-reactid="90">Default Plugins</span></a></li></ul></div></section><section data-reactid="91"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="92"><span data-reactid="93">Building a Plugin</span></h4><div class="nested-list-reset" data-reactid="94"><ul class="page-list nav flex-column mb5" data-reactid="95"><li class="f6 lh-copy pv1" data-reactid="96"><a class="nav-link " href="/graphile-build/all-hooks/" data-reactid="97"><span data-reactid="98">All Hooks</span></a></li><li class="f6 lh-copy pv1" data-reactid="99"><a class="nav-link " href="/graphile-build/build-object/" data-reactid="100"><span data-reactid="101">Build Object</span></a></li><li class="f6 lh-copy pv1" data-reactid="102"><a class="nav-link " href="/graphile-build/context-object/" data-reactid="103"><span data-reactid="104">Context Object</span></a></li><li class="f6 lh-copy pv1" data-reactid="105"><a class="nav-link " href="/graphile-build/schema-builder/" data-reactid="106"><span data-reactid="107">SchemaBuilder</span></a></li></ul></div></section></aside><div class="col-xs-12 col-md-9 first-xs main-content" data-reactid="108"><div class="row" data-reactid="109"><div class="col-xs-12" style="width:100%;" data-reactid="110"><div class="edit-this-page" data-reactid="111"><a href="https://github.com/graphile/graphile.github.io/edit/develop/src/pages/graphile-build/look-ahead.md" data-reactid="112">üìù Edit this page</a></div><div data-reactid="113"><h2 id="advanced-look-ahead"><a href="#advanced-look-ahead" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced: Look Ahead</h2>
<p class="intro">
Traditionally in GraphQL APIs DataLoader is used to batch requests to minimize
the impact of N+1 queries. DataLoader can be use with Graphile-Build in the same
way as it is with GraphQL. However, sometimes DataLoader isn't the best
approach for your system, so Graphile-Build provides a powerful Look-Ahead
functionality you can use to optimize your GraphQL queries. This is
particularly well suited to environments that allow you to specify complex
structures to be returned (such as databases or other GraphQL APIs), but is
generic enough that it can be used for many use-cases.
</p>
<h3 id="seeing-which-sub-fields-were-requested"><a href="#seeing-which-sub-fields-were-requested" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Seeing which sub-fields were requested</h3>
<p>The <a href="http://graphql.org/graphql-js/type/#graphqlobjecttype"><code class="language-text">resolve</code> method in
GraphQL</a> is actually
called with 4 arguments:</p>
<ul>
<li>source - the data provided by the parent field</li>
<li>args - the arguments passed to the field in the query</li>
<li>context - the context object used throughout the resolvers</li>
<li>resolveInfo - an instance of GraphQLResolveInfo</li>
</ul>
<p>This 4th argument is the one we're interested in because it contains a number
of goodies. But some of these are hard to digest, so we give you some helpers...</p>
<h5 id="parseresolveinforesolveinfo"><a href="#parseresolveinforesolveinfo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">parseResolveInfo(resolveInfo)</code></h5>
<p>Will take the AST from the GraphQLResolveInfo and extract from it a nested
object consisting of:</p>
<ul>
<li>name - the name of the current field</li>
<li>alias - the alias the current field was requested as</li>
<li>args - the arguments passed to the field in the query</li>
<li>fieldsByTypeName - the sub-fields that were requested on the current object
broken down by the names of the GraphQL types that could be returned.</li>
</ul>
<p>Because GraphQL supports Union and other complex types, it's possible to
request different sub-fields depending on the type of data that's returned from
a field, hence <code class="language-text">fieldsByTypeName</code>. If you happen to know the type that's going
to be returned then you can simplify with the next method...</p>
<p>From <a href="https://github.com/graphile/graphile-build/tree/master/packages/graphql-parse-resolve-info#parseresolveinforesolveinfo"><code class="language-text">graphql-parse-resolve-info</code></a></p>
<p>TODO: example</p>
<h5 id="simplifyparsedresolveinfofragmentwithtypeparsedresolveinfofragment-graphqltype"><a href="#simplifyparsedresolveinfofragmentwithtypeparsedresolveinfofragment-graphqltype" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">simplifyParsedResolveInfoFragmentWithType(parsedResolveInfoFragment, graphQLType)</code></h5>
<p>If you know the precise named type that your field will return you can pass the
result of <code class="language-text">parseResolveInfo(resolveInfo)</code> to this method along with the named
type <code class="language-text">graphQLType</code> and we'll return a similar object with an additional
<code class="language-text">fields</code> property that are only the fields that are compatible with
the <code class="language-text">graphQLType</code>.</p>
<p>From <a href="https://github.com/graphile/graphile-build/tree/master/packages/graphql-parse-resolve-info#simplifyparsedresolveinfofragmentwithtypeparsedresolveinfofragment-returntype"><code class="language-text">graphql-parse-resolve-info</code></a></p>
<p>TODO: example</p>
<h3 id="declaring-meta-data-associated-with-a-field"><a href="#declaring-meta-data-associated-with-a-field" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declaring meta-data associated with a field</h3>
<p>When you add a field to a <code class="language-text">GraphQLObjectType</code> you may specify metadata
associated with this field.</p>
<p>Resolved metadata in Graphile-Build (see the next section) will be an object
with string keys and values which are an array of arbitrary JavaScript values.
If the same metadata key was added multiple times it will simply add to the
array.</p>
<p>There are three ways to declare meta-data with a field:</p>
<h4 id="when-initially-defining-the-object-fields"><a href="#when-initially-defining-the-object-fields" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>When initially defining the object fields</h4>
<p>Instead of passing an object to <code class="language-text">fields</code>, you can pass a function. This function will be passed the methods:</p>
<ul>
<li><code class="language-text">addDataGeneratorForField(fieldName, generatorFn)</code> - will associate the data
generator with the field</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MyObject <span class="token operator">=</span> <span class="token function">newWithHooks</span><span class="token punctuation">(</span>
  GraphQLObjectType<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">"MyObject"</span><span class="token punctuation">,</span>
    fields<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> addDataGeneratorForField <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">addDataGeneratorForField</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          map<span class="token punctuation">:</span> obj <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span><span class="token constant">ID</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span>      <span class="token function">addDataGeneratorForField</span><span class="token punctuation">(</span><span class="token string">"caps"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          map<span class="token punctuation">:</span> obj <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span><span class="token constant">CAPS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">addDataGeneratorForField</span><span class="token punctuation">(</span><span class="token string">"random"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          map<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">        id<span class="token punctuation">:</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLNonNull</span><span class="token punctuation">(</span>GraphQLString<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          resolve<span class="token punctuation">:</span> resolveAlias<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span>        caps<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLNonNull</span><span class="token punctuation">(</span>GraphQLString<span class="token punctuation">)</span><span class="token punctuation">,</span>
          resolve<span class="token punctuation">:</span> resolveAlias<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        random<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLNonNull</span><span class="token punctuation">(</span>GraphQLInt<span class="token punctuation">)</span><span class="token punctuation">,</span>
          resolve<span class="token punctuation">:</span> resolveAlias<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h4 id="when-creating-an-individual-field"><a href="#when-creating-an-individual-field" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>When creating an individual field</h4>
<p>You can use the <code class="language-text">fieldWithHooks</code> helper, passing it a function:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MyObject <span class="token operator">=</span> <span class="token function">newWithHooks</span><span class="token punctuation">(</span>GraphQLObjectType<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"MyObject"</span><span class="token punctuation">,</span>
  fields<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fieldWithHooks <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      id<span class="token punctuation">:</span> <span class="token function">fieldWithHooks</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> addDataGenerator <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">        <span class="token function">addDataGenerator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">            map<span class="token punctuation">:</span> obj <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span><span class="token constant">ID</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLNonNull</span><span class="token punctuation">(</span>GraphQLString<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">          resolve<span class="token punctuation">:</span> resolveAlias<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span>      caps<span class="token punctuation">:</span> <span class="token function">fieldWithHooks</span><span class="token punctuation">(</span><span class="token string">"caps"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> addDataGenerator <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">addDataGenerator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">:</span> obj <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span><span class="token constant">CAPS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLNonNull</span><span class="token punctuation">(</span>GraphQLString<span class="token punctuation">)</span><span class="token punctuation">,</span>
          resolve<span class="token punctuation">:</span> resolveAlias<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      random<span class="token punctuation">:</span> <span class="token function">fieldWithHooks</span><span class="token punctuation">(</span><span class="token string">"random"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> addDataGenerator <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">addDataGenerator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLNonNull</span><span class="token punctuation">(</span>GraphQLInt<span class="token punctuation">)</span><span class="token punctuation">,</span>
          resolve<span class="token punctuation">:</span> resolveAlias<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h4 id="when-processing-arguments-addargdatagenerator"><a href="#when-processing-arguments-addargdatagenerator" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>When processing arguments: <code class="language-text">addArgDataGenerator</code></h4>
<p>Arguments also influence what we should do, so we can use <code class="language-text">addArgDataGenerator</code>
to provide look-ahead data based on the arguments received.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MyObject <span class="token operator">=</span> <span class="token function">newWithHooks</span><span class="token punctuation">(</span>GraphQLObjectType<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"MyObject"</span><span class="token punctuation">,</span>
  fields<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fieldWithHooks <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      connection<span class="token punctuation">:</span> <span class="token function">fieldWithHooks</span><span class="token punctuation">(</span>
        <span class="token string">"connection"</span><span class="token punctuation">,</span>
<span class="gatsby-highlight-code-line">        <span class="token punctuation">(</span><span class="token punctuation">{</span> addArgDataGenerator <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">          <span class="token function">addArgDataGenerator</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">connectionFirst</span><span class="token punctuation">(</span><span class="token punctuation">{</span> first <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">              <span class="token keyword">return</span> <span class="token punctuation">{</span> limit<span class="token punctuation">:</span> <span class="token punctuation">[</span>first<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span>          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> ConnectionType<span class="token punctuation">,</span>
            args<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              first<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                type<span class="token punctuation">:</span> GraphQLInt<span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h4 id="in-a-graphqlobjecttypefieldsfield-hook"><a href="#in-a-graphqlobjecttypefieldsfield-hook" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>In a <code class="language-text">GraphQLObjectType:fields:field</code> hook</h4>
<p>Hooks can also associate metadata with a field; they are passed <code class="language-text">addDataGenerator</code> on the Context argument, for example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">MyObjectAddIdDataGeneratorPlugin</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  builder<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">'GraphQLObjectType:fields:field'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
    field<span class="token punctuation">,</span>
    _<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> fieldName<span class="token punctuation">,</span> Self<span class="token punctuation">,</span> addDataGenerator <span class="token punctuation">}</span>
  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Self<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'MyObject'</span> <span class="token operator">||</span> fieldName <span class="token operator">!==</span> <span class="token string">'id'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> field<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">    <span class="token function">addDataGenerator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> alias <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">        map<span class="token punctuation">:</span> obj <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>alias<span class="token punctuation">]</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span><span class="token constant">ID</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span>    <span class="token keyword">return</span> field<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<h3 id="recursing"><a href="#recursing" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recursing</h3>
<p>TODO: document this!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MyObjectConnection <span class="token operator">=</span> <span class="token function">newWithHooks</span><span class="token punctuation">(</span>GraphQLObjectType<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"MyObjectConnection"</span><span class="token punctuation">,</span>
  fields<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> recurseDataGeneratorsForField <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token function">recurseDataGeneratorsForField</span><span class="token punctuation">(</span><span class="token string">"edges"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      edges<span class="token punctuation">:</span> <span class="token punctuation">{</span>
</span>        type<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">GraphQLList</span><span class="token punctuation">(</span>MyObjectEdge<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h3 id="determining-the-meta-data-requested-subfields-have-specified"><a href="#determining-the-meta-data-requested-subfields-have-specified" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Determining the meta-data requested subfields have specified</h3>
<p>When it comes to <code class="language-text">resolve</code> time we need to know what meta-data is available as
it may influence what we do. We can only do this on a per-field (since every
field will fetch data in a different way) so to use this we must use
<code class="language-text">fieldWithHooks</code> to get access to the <code class="language-text">getDataFromParsedResolveInfoFragment</code>
method:</p>
<h4 id="getdatafromparsedresolveinfofragmentparsedresolveinfofragment-type"><a href="#getdatafromparsedresolveinfofragmentparsedresolveinfofragment-type" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">getDataFromParsedResolveInfoFragment(parsedResolveInfoFragment, type)</code></h4>
<p>Given a <code class="language-text">parseResolveInfoFragment</code> and an expected return type, this will return the metadata associated with this field.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> Query <span class="token operator">=</span> <span class="token function">newWithHooks</span><span class="token punctuation">(</span>GraphQLObjectType<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Query"</span><span class="token punctuation">,</span>
  fields<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fieldWithHooks <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    myConnection<span class="token punctuation">:</span> <span class="token function">fieldWithHooks</span><span class="token punctuation">(</span>
      <span class="token string">"myConnection"</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">{</span> addArgDataGenerator<span class="token punctuation">,</span> getDataFromParsedResolveInfoFragment <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">addArgDataGenerator</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">connectionFirst</span><span class="token punctuation">(</span><span class="token punctuation">{</span> first <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> limit<span class="token punctuation">:</span> <span class="token punctuation">[</span>first<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span>          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> MyConnection
          args<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            first<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              type<span class="token punctuation">:</span> GraphQLInt<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> args<span class="token punctuation">,</span> context<span class="token punctuation">,</span> resolveInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> parsedResolveInfoFragment <span class="token operator">=</span> <span class="token function">parseResolveInfo</span><span class="token punctuation">(</span>resolveInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">            <span class="token keyword">const</span> resolveData <span class="token operator">=</span> <span class="token function">getDataFromParsedResolveInfoFragment</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">              parsedResolveInfoFragment<span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">              MyConnection
</span><span class="gatsby-highlight-code-line">            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span>
            <span class="token comment">// For example, if this is called with (limit: 3)</span>
            <span class="token comment">// then we'd have:</span>
            <span class="token comment">//</span>
            <span class="token comment">// resolveData = {</span>
<span class="gatsby-highlight-code-line">            <span class="token comment">//   limit: [</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">//     3</span>
</span><span class="gatsby-highlight-code-line">            <span class="token comment">//   ]</span>
</span>            <span class="token comment">// }</span>

            <span class="token comment">// TODO: generate and return connection</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h3 id="see-it-for-yourself"><a href="#see-it-for-yourself" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>See it for yourself</h3>
<p>Check out a working example in <code class="language-text">fieldData</code> test:</p>
<p><a href="https://github.com/graphile/graphile-build/blob/master/packages/graphile-build/__tests__/fieldData.test.js">https://github.com/graphile/graphile-build/blob/master/packages/graphile-build/<strong>tests</strong>/fieldData.test.js</a></p></div></div><br data-reactid="114"/><br data-reactid="115"/><div class="col-xs-12 mt3 mb5" data-reactid="116"><div class="row between-xs" data-reactid="117"><div class="col-xs-6" data-reactid="118"><a class="" href="/graphile-build/hooks/" data-reactid="119"><span class="fa fa-fw fa-long-arrow-left" data-reactid="120"></span><!-- react-text: 121 --> <!-- /react-text --><span data-reactid="122">Hooks</span></a></div><div class="col-xs-6 tr" data-reactid="123"><a class="" href="/graphile-build/graphile-build/" data-reactid="124"><span data-reactid="125">graphile-build</span><!-- react-text: 126 --> <!-- /react-text --><span class="fa fa-fw fa-long-arrow-right" data-reactid="127"></span></a></div></div></div></div></div></div></div></section><section class="mailinglist" data-reactid="128"><div class="container" data-reactid="129"><div class="row" data-reactid="130"><div class="col-xs-12" data-reactid="131"><div class="hero-block" data-reactid="132"><h3 data-reactid="133"><!-- react-text: 134 -->Questions, comments or feedback?<!-- /react-text --><br data-reactid="135"/><!-- react-text: 136 -->Email<!-- /react-text --><!-- react-text: 137 --> <!-- /react-text --><a href="mailto:info@graphile.org?subject=Documentation%20question/comment/feedback:)" data-reactid="138">info@graphile.org</a></h3><form action="//graphile.us16.list-manage.com/subscribe/post?u=d103f710cf00a9273b55e8e9b&amp;id=c3a9eb5c4e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="139"><div id="mc_embed_signup_scroll" class="center hero-block" data-reactid="140"><p data-reactid="141">Keep up to date on Graphile and PostGraphile features/changes. Subscribe to our occasional announcements newsletter:</p><div class="mc-field-group form-inline justify-content-center" data-reactid="142"><div class="form-group" data-reactid="143"><div class="mb2" data-reactid="144"><label class="label--small" for="mce-EMAIL" data-reactid="145">Email address:</label></div><input type="email" autocapitalize="off" autocomplete="off" autocorrect="off" class="input-text mb0-ns mb1" id="mce-EMAIL" name="EMAIL" spellcheck="false" value="" data-reactid="146"/><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="147"><input type="text" name="b_d103f710cf00a9273b55e8e9b_c3a9eb5c4e" tabindex="-1" value="" data-reactid="148"/></div><input type="submit" class="button--solid" id="mc-embedded-subscribe" name="subscribe" value="Subscribe" data-reactid="149"/></div><div id="mce-responses" class="clear" data-reactid="150"><div class="response" id="mce-error-response" style="display:none;" data-reactid="151"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="152"></div></div></div></div></form></div></div></div></div></section></div><footer class="bg-white pv5 bt b--black f6 lh-copy" data-reactid="153"><div class="container" data-reactid="154"><div class="row" data-reactid="155"><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="156"><h6 data-reactid="157">PostGraphile</h6><ul data-reactid="158"><li data-reactid="159"><a href="/postgraphile/introduction/" data-reactid="160">Introduction</a></li><li data-reactid="161"><a href="/postgraphile/security/" data-reactid="162">Security</a></li><li data-reactid="163"><a href="/postgraphile/extending/" data-reactid="164">Extending</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="165"><h6 data-reactid="166">Graphile Build</h6><ul data-reactid="167"><li data-reactid="168"><a href="/graphile-build/" data-reactid="169">About</a></li><li data-reactid="170"><a href="/graphile-build/getting-started/" data-reactid="171">Getting Started</a></li><li data-reactid="172"><a href="/graphile-build/plugins/" data-reactid="173">Plugins</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset" data-reactid="174"><h6 data-reactid="175">Community</h6><ul data-reactid="176"><li data-reactid="177"><a href="https://github.com/graphile" data-reactid="178">GitHub</a></li><li data-reactid="179"><a href="https://gitter.im/graphile/postgraphile" data-reactid="180">Gitter chat</a></li><li data-reactid="181"><a href="https://twitter.com/benjie" data-reactid="182">Twitter</a></li></ul></div><div class="col-xs-12 col-md-offset-1 col-md-5" data-reactid="183"><h6 data-reactid="184">About</h6><!-- react-text: 185 -->PostGraphile and Graphile Build are Open Source Software, developed and maintained by <!-- /react-text --><a href="https://twitter.com/benjie" data-reactid="186">@Benjie</a><!-- react-text: 187 -->with the help of the community.<!-- /react-text --><br data-reactid="188"/><br data-reactid="189"/><!-- react-text: 190 -->You can support the projects via<!-- /react-text --><!-- react-text: 191 --> <!-- /react-text --><a href="https://www.patreon.com/benjie" target="_blank" data-reactid="192">Patreon</a><!-- react-text: 193 -->, by <!-- /react-text --><a href="/postgraphile/pricing/" data-reactid="194">going Pro</a><!-- react-text: 195 -->, or by paying for <!-- /react-text --><a href="/support/" data-reactid="196">Professional Services</a><!-- react-text: 197 -->. Your support is gratefully received üôè<!-- /react-text --><br data-reactid="198"/><br data-reactid="199"/><!-- react-text: 200 -->This site is copyright ¬© Benjie Gillam <!-- /react-text --><!-- react-text: 201 -->2018<!-- /react-text --><!-- react-text: 202 -->. Design and logos copyright ¬© Benjie Gillam and Jof Arnold<!-- /react-text --><!-- react-text: 203 --> <!-- /react-text --><!-- react-text: 204 -->2018<!-- /react-text --><!-- react-text: 205 -->.<!-- /react-text --><br data-reactid="206"/><br data-reactid="207"/><!-- react-text: 208 -->Corrections and contributions to this website are gratefully received via<!-- /react-text --><!-- react-text: 209 --> <!-- /react-text --><a href="https://github.com/graphile/graphile.github.io" data-reactid="210">its GitHub repository</a><!-- react-text: 211 -->.<!-- /react-text --><br data-reactid="212"/><br data-reactid="213"/><!-- react-text: 214 -->PostGraphile was <!-- /react-text --><a href="/history/" data-reactid="215">originally authored</a><!-- react-text: 216 --> as PostGraphQL by<!-- /react-text --><!-- react-text: 217 --> <!-- /react-text --><a href="https://twitter.com/calebmer" data-reactid="218">Caleb Meredith</a><!-- react-text: 219 -->.<!-- /react-text --></div></div></div></footer></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-18e5b198cd6a20a643d7.js","266772403791747":"component---src-templates-home-js-408d6540d13e20da37b8.js","96961042003272":"component---src-templates-page-js-ec852048c4e46c858b13.js","59784799166159":"component---src-templates-marketing-js-9f9607cc4787f4dfabcf.js","60335399758886":"path----557518bd178906f8d58a.js","142629428675168":"path---index-04361dfa1e873f59fc7b.js","128602041518144":"path---graphile-build-all-hooks-bb9edb693636344304bf.js","45788430371641":"path---history-a27927ff05ab2ef05b8e.js","69504633912515":"path---graphile-build-context-object-caa89ded67d6a2e6b611.js","125892818282768":"path---graphile-build-default-plugins-6e29777d777bfb2ae576.js","64023390553510":"path---graphile-build-build-object-12d21e63d1dbbf975df8.js","109947277077173":"path---graphile-build-getting-started-951828878df9cbbaeb90.js","16210746157911":"path---graphile-build-graphile-build-48e33846580e6be81e96.js","57552969484094":"path---graphile-build-hooks-2f43ac7eb2519f86c543.js","36474596372704":"path---graphile-build-omitting-plugins-c83f72612072754014f2.js","276285638780302":"path---graphile-build-plugin-options-79b2a57d302d788eb919.js","136546493962690":"path---graphile-build-plugins-0d761982eaee3ea56990.js","277477532944301":"path---graphile-build-schema-builder-fd87e90cdde7f95f7729.js","192423053311925":"path---graphile-build-pg-security-fe828733c148ae099f27.js","133858743292129":"path---postgraphile-settings-ba1a3053b7ad1f4e51b2.js","141666846945901":"path---support-3d1d219a638e5f6326b3.js","235145966638131":"path---postgraphile-code-of-conduct-eae6a4ee73474e022094.js","114781403929568":"path---postgraphile-community-chat-3d0e60d495e211a7478c.js","99411096849217":"path---postgraphile-computed-columns-332cf8326972aee80171.js","245194823331250":"path---postgraphile-connections-040ff9f066f4f0613e72.js","226259727392765":"path---postgraphile-crud-mutations-1f1947cb8c1dc4ee52b3.js","216163489569211":"path---postgraphile-community-plugins-d5f91eb78a1810272f6b.js","209456356109321":"path---postgraphile-custom-mutations-2948ccb83165eda55e22.js","262226386268176":"path---postgraphile-custom-queries-29849c4c7c430737c399.js","58450730530065":"path---postgraphile-debugging-175eb035738a1adbf383.js","46110498460401":"path---postgraphile-evaluating-7de42502702fb60fac1c.js","183024611244872":"path---postgraphile-default-role-b83f06e344d9a51099bd.js","235675790195762":"path---postgraphile-examples-588408fee944a78e36b5.js","101463202308976":"path---postgraphile-function-restrictions-2974b736b0908892ea2d.js","29661158995595":"path---postgraphile-filtering-260ec8783b236d54b944.js","231292683096477":"path---postgraphile-introduction-0609c9b33458a8722a98.js","33982096820675":"path---postgraphile-introspection-155dca139fe0cc16ce4b.js","217512476184238":"path---postgraphile-jwt-guide-694af01a638c4908fdf7.js","245838197689590":"path---postgraphile-performance-a3476b6a5df63e0d147c.js","34112019379484":"path---postgraphile-plugins-917bf728ed232adf0ad2.js","43306645800525":"path---postgraphile-postgresql-indexes-adca4074906eebd5137a.js","136696082986067":"path---postgraphile-relations-c7db569e66b00fee9c20.js","20524195157075":"path---postgraphile-quick-start-guide-fc133cb491fa67b986ef.js","126695865748518":"path---postgraphile-reserved-keywords-0d2e20ec6300766781e9.js","187294999324209":"path---postgraphile-requirements-971195cec8814a948b4e.js","143935096069691":"path---postgraphile-security-5a82b344692209746fec.js","247601703930759":"path---postgraphile-usage-6fe14068e81b66c00d11.js","156260474427399":"path---postgraphile-why-nullable-90ba9afcbea478bb6ce4.js","109627700230002":"path---graphile-build-2db41d1ba8e5671d3014.js","76338124382236":"path---graphile-build-look-ahead-d3a6d9b88774cdb80982.js","48764759135427":"path---postgraphile-8176f65eccf83167cc34.js","85182451526728":"path---postgraphile-pricing-72d7e46231e8d1d715be.js","163587040327238":"path---postgraphile-production-3b921b90daf6c4a93442.js","257659440118484":"path---postgraphile-procedures-bf07ca27201c6ce7e0e9.js","27297302318019":"path---postgraphile-smart-comments-e202792e68f32a9aa7f4.js","112985368742066":"path---postgraphile-subscriptions-32b4b539120e19e84ab8.js","174583816914262":"path---postgraphile-testing-jest-f46bc4b5d21db84a4ce2.js","3265662318058":"path---postgraphile-usage-cli-a2d71de1a99edc944975.js","148070795768796":"path---postgraphile-usage-library-99f2f05251b242f754b6.js","272066437984048":"path---postgraphile-usage-schema-57c0080d4ed190472ffc.js","87638492893048":"path---postgraphile-v-3-migration-84799079bd7d454cfdfc.js","57656932303775":"path---postgraphile-v-4-new-features-aaf78bfdaf3786e13580.js","1465359564156":"path---postgraphile-extending-68316cb7560191eb26dd.js","17839233601159":"path---postgraphile-postgresql-schema-design-49ebac66e34409f72d8c.js","114276838955818":"component---src-layouts-index-js-53c26317295bc637138f.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-3596aa1ab404ed60101f.js","/app-18e5b198cd6a20a643d7.js","/path---graphile-build-look-ahead-d3a6d9b88774cdb80982.js","/component---src-templates-page-js-ec852048c4e46c858b13.js","/component---src-layouts-index-js-53c26317295bc637138f.js"])/*]]>*/</script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script></body></html>