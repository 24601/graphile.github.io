<!DOCTYPE html>
 <html lang="en"><head><link rel="preload" href="/page-component---src-templates-page-js-70c93c1803f7882b1fca.js" as="script"/><link rel="preload" href="/path---graphile-build-look-ahead-d401a0cc6c044167901a.js" as="script"/><link rel="preload" href="/layout-component---index-2e6341fe1913bccea6ec.js" as="script"/><link rel="preload" href="/app-5e170a83112b182a523b.js" as="script"/><link rel="preload" href="/commons-a3883ed231e709df4f62.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-5e170a83112b182a523b.js","10721449141870815000":"page-component---src-templates-marketing-js-c0bbbc43e78b81f3a180.js","11888651905112195000":"page-component---src-templates-page-js-70c93c1803f7882b1fca.js","9347362237655822000":"path---index-8d0e4d9670c2346761b5.js","7205504750529626000":"path---graphile-build-getting-started-440a9a9fae4bf444745b.js","3771791408109622300":"path---graphile-build-hooks-64fa1025a869b07c3c8e.js","5002895319514266000":"path---graphile-build-look-ahead-d401a0cc6c044167901a.js","8948711028338852000":"path---graphile-build-plugins-c85118b0b93306f2208e.js","17241999800008180000":"layout-component---index-2e6341fe1913bccea6ec.js"}
            //]]>
            </script><title data-react-helmet="true">Graphile</title><link data-react-helmet="true" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous"/><meta data-react-helmet="true" name="description" content="Utilities to build powerful and performant GraphQL APIs"/><meta data-react-helmet="true" name="keywords" content="GraphQL, API, Graph, PostgreSQL, PostGraphQL, server, plugins, introspection, reflection"/><script data-react-helmet="true" src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script><script data-react-helmet="true" src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script><script data-react-helmet="true" src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = location.hash.replace('#', '')
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-a3883ed231e709df4f62.js","/app-5e170a83112b182a523b.js","/layout-component---index-2e6341fe1913bccea6ec.js","/path---graphile-build-look-ahead-d401a0cc6c044167901a.js","/page-component---src-templates-page-js-70c93c1803f7882b1fca.js"
])
  </script><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><link rel="stylesheet" href="/styles.css"/></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="1530680223"><div data-reactid="2"><!-- react-empty: 3 --><header data-reactid="4"><nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse" data-reactid="5"><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" data-reactid="6"><span class="navbar-toggler-icon" data-reactid="7"></span></button><a class="navbar-brand" href="/" data-reactid="8">Graphile</a><div class="collapse navbar-collapse" id="navbarSupportedContent" data-reactid="9"><ul class="navbar-nav mr-auto" data-reactid="10"><li class="nav-item" data-reactid="11"><a class="nav-link " href="/" data-reactid="12">Home</a></li><li class="nav-item" data-reactid="13"><a class="nav-link active" href="/graphile-build/getting-started/" data-reactid="14">Graphile-Build</a></li></ul><span class="navbar-text" data-reactid="15"><a href="https://github.com/graphile/graphile-build" data-reactid="16"><img src="/images/GitHub-Mark-Light-120px-plus.png" width="26" data-reactid="17"/></a></span></div></nav></header><section style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0;" class="page-content" data-reactid="18"><div class="container" data-reactid="19"><div class="row" data-reactid="20"><div class="col-12 col-md-3 push-md-9" data-reactid="21"><ul class="nav flex-column" data-reactid="22"><li class="nav-item" data-reactid="23"><a class="nav-link " href="/graphile-build/getting-started/" data-reactid="24">Getting Started</a></li><li class="nav-item" data-reactid="25"><a class="nav-link " href="/graphile-build/plugins/" data-reactid="26">Plugins</a></li><li class="nav-item" data-reactid="27"><a class="nav-link " href="/graphile-build/hooks/" data-reactid="28">Hooks</a></li><li class="nav-item" data-reactid="29"><a class="nav-link active" href="/graphile-build/look-ahead/" data-reactid="30">Look Ahead</a></li></ul></div><div class="col-12 col-md-9 pull-md-3" data-reactid="31"><div class="container" data-reactid="32"><div class="row" data-reactid="33"><div style="width:100%;" data-reactid="34"><h2 id="advanced-look-ahead"><a href="#advanced-look-ahead" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced: Look Ahead</h2>
<p>Traditionally in GraphQL APIs DataLoader is used to batch requests to minimize
the impact of N+1 queries. DataLoader can be use with Graphile-Build in the same
way as it is with GraphQL. However, sometimes DataLoader isn't the best
approach for your system, so Graphile-Build provides a powerful Look-Ahead
functionality you can use to optimize your GraphQL queries. This is
particularly well suited to environments that allow you to specify complex
structures to be returned (such as databases or other GraphQL APIs), but is
generic enough that it can be used for many use-cases.</p>
<h3 id="seeing-which-sub-fields-were-requested"><a href="#seeing-which-sub-fields-were-requested" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Seeing which sub-fields were requested</h3>
<p>The <a href="http://graphql.org/graphql-js/type/#graphqlobjecttype"><code>resolve</code> method in
GraphQL</a> is actually
called with 4 arguments:</p>
<ul>
<li>source - the data provided by the parent field</li>
<li>args - the arguments passed to the field in the query</li>
<li>context - the context object used throughout the resolvers</li>
<li>resolveInfo - an instance of GraphQLResolveInfo</li>
</ul>
<p>This 4th argument is the one we're interested in because it contains a number
of goodies. But some of these are hard to digest, so we give you some helpers...</p>
<h5 id="parseresolveinforesolveinfo"><a href="#parseresolveinforesolveinfo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>parseResolveInfo(resolveInfo)</code></h5>
<p>Will take the AST from the GraphQLResolveInfo and extract from it a nested
object consisting of:</p>
<ul>
<li>name - the name of the current field</li>
<li>alias - the alias the current field was requested as</li>
<li>args - the arguments passed to the field in the query</li>
<li>fieldsByTypeName - the sub-fields that were requested on the current object
broken down by the names of the GraphQL types that could be returned.</li>
</ul>
<p>Because GraphQL supports Union and other complex types, it's possible to
request different sub-fields depending on the type of data that's returned from
a field, hence <code>fieldsByTypeName</code>. If you happen to know the type that's going
to be returned then you can simplify with the next method...</p>
<p>From <a href="https://github.com/graphile/graphile-build/tree/master/packages/graphql-parse-resolve-info#parseresolveinforesolveinfo"><code>graphql-parse-resolve-info</code></a></p>
<p>TODO: example</p>
<h5 id="simplifyparsedresolveinfofragmentwithtypeparsedresolveinfofragment-graphqltype"><a href="#simplifyparsedresolveinfofragmentwithtypeparsedresolveinfofragment-graphqltype" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>simplifyParsedResolveInfoFragmentWithType(parsedResolveInfoFragment, graphQLType)</code></h5>
<p>If you know the precise named type that your field will return you can pass the
result of <code>parseResolveInfo(resolveInfo)</code> to this method along with the named
type <code>graphQLType</code> and we'll return a similar object with an additional
<code>fields</code> property that are only the fields that are compatible with
the <code>graphQLType</code>.</p>
<p>From <a href="https://github.com/graphile/graphile-build/tree/master/packages/graphql-parse-resolve-info#simplifyparsedresolveinfofragmentwithtypeparsedresolveinfofragment-returntype"><code>graphql-parse-resolve-info</code></a></p>
<p>TODO: example</p>
<h3 id="declaring-meta-data-associated-with-a-field"><a href="#declaring-meta-data-associated-with-a-field" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declaring meta-data associated with a field</h3>
<h3 id="determining-what-meta-data-requested-subfields-have-specified"><a href="#determining-what-meta-data-requested-subfields-have-specified" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Determining what meta-data requested subfields have specified</h3>
<h5 id="generatedatafortypetype-parsedresolveinfofragment"><a href="#generatedatafortypetype-parsedresolveinfofragment" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>generateDataForType(type, parsedResolveInfoFragment)</code></h5>
<p>For performance optimisations</p>
<p>TODO: document</p></div></div><div class="row" data-reactid="35"><a class="btn btn-secondary btn-large" href="/graphile-build/hooks/" data-reactid="36"><!-- react-text: 37 -->« <!-- /react-text --><!-- react-text: 38 -->Hooks<!-- /react-text --></a><div class="ml-auto" data-reactid="39"></div></div></div></div></div></div></section><footer data-reactid="40"><div class="container" data-reactid="41">Copyright © Benjie Gillam 2017</div></footer></div></div></div></body></html>