<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNK4X8M');</script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"/><link rel="preload" href="/component---src-layouts-index-js-ace7914a8fea060c15f6.js" as="script"/><link rel="preload" href="/component---src-templates-page-js-6df43615680729d980c3.js" as="script"/><link rel="preload" href="/path---postgraphile-v-4-new-features-171417b66cbbbe3941f7.js" as="script"/><link rel="preload" href="/app-1b68f72edc9b9cfdf508.js" as="script"/><link rel="preload" href="/commons-e9c5ebe9f9d03df65cb6.js" as="script"/><title data-react-helmet="true">PostGraphile | v4 Feature Guide</title><meta data-react-helmet="true" name="description" content="Utilities to build powerful and performant GraphQL APIs"/><meta data-react-helmet="true" name="keywords" content="GraphQL, API, Graph, PostgreSQL, PostGraphile, PostGraphQL, Postgres-GraphQL, server, plugins, introspection, reflection"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><link rel="stylesheet" href="/styles.css?t=2018-11-02T11-05-45.811Z"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNK4X8M" height="0" width="0" style="display:none;visibility:hidden;"></iframe></noscript><div id="___gatsby"><div tabindex="-1" data-reactroot="" data-reactid="1" data-react-checksum="172480217"><div class="template-page postgraphile" data-reactid="2"><!-- react-empty: 3 --><header class="header content absolute z-999 w-100" data-reactid="4"><nav class="navbar" data-reactid="5"><div class="container" data-reactid="6"><input type="checkbox" class="navbar-toggler input-reset" id="toggle" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" data-reactid="7"/><div class="nav-controls nested-list-reset " data-reactid="8"><div class="navbar-crosses" data-reactid="9"><span class="line line-1" data-reactid="10"> </span><span class="line line-2" data-reactid="11"> </span><span class="line line-3" data-reactid="12"> </span></div><ul class="navbar-nav flex w-100" data-reactid="13"><li class="navbar-item" data-reactid="14"><a class="nav-link " href="/" data-reactid="15"><span class="home-icon fas fa-home" data-reactid="16"></span><!-- react-text: 17 --> <!-- /react-text --><span class="home" data-reactid="18">Home</span></a></li><!-- react-empty: 19 --><!-- react-empty: 20 --><!-- react-empty: 21 --><li class="navbar-item" data-reactid="22"><a class="nav-link " href="/postgraphile/" data-reactid="23">Overview</a></li><li class="navbar-item" data-reactid="24"><a class="nav-link active" href="/postgraphile/introduction/" data-reactid="25">Documentation</a></li><li class="navbar-item" data-reactid="26"><a class="nav-link" href="https://www.patreon.com/benjie" target="patreon" data-reactid="27"><!-- react-text: 28 -->Sponsor<!-- /react-text --><!-- react-text: 29 --> <!-- /react-text --><span class="fas fa-external-link-square-alt" data-reactid="30"></span></a></li><!-- react-empty: 31 --><!-- react-empty: 32 --><!-- react-empty: 33 --><!-- react-empty: 34 --><!-- react-empty: 35 --><li class="navbar-item ml-auto navbar-item-right" data-reactid="36"><span class="searchbox-container" data-reactid="37"><input id="search-box" placeholder="Search" data-reactid="38"/><span class="fas fa-search searchbox-search" data-reactid="39"></span></span></li><li class="navbar-item navbar-item-right" data-reactid="40"><a class="nav-link " href="/support/" data-reactid="41"><span data-reactid="42"><span class="hide-when-small" data-reactid="43">Support and </span><!-- react-text: 44 -->Services<!-- /react-text --></span></a></li><li class="navbar-item navbar-item-right" data-reactid="45"><a class="nav-link nav-github-link flex items-center" href="https://github.com/graphile/postgraphile" data-reactid="46"><span class="f3 fab fa-github" data-reactid="47"></span><!-- react-text: 48 --> <!-- /react-text --><span class="github" data-reactid="49"><!-- react-text: 50 -->Github<!-- /react-text --><!-- react-text: 51 --> <!-- /react-text --><span class="fas fa-external-link-square-alt" data-reactid="52"></span></span></a></li></ul></div></div></nav></header><div class="page-content" data-reactid="53"><section data-reactid="54"><div class="container" data-reactid="55"><div class="row between-xs" data-reactid="56"><aside class="sidebar col-xs-12 col-md-3 last-xs mt3" data-reactid="57"><section data-reactid="58"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="59"><span data-reactid="60">Overview</span></h4><div class="nested-list-reset" data-reactid="61"><ul class="page-list nav flex-column mb5" data-reactid="62"><li class="f6 lh-copy pv1" data-reactid="63"><a class="nav-link " href="/postgraphile/introduction/" data-reactid="64"><span data-reactid="65">Introduction</span></a></li><li class="f6 lh-copy pv1" data-reactid="66"><a class="nav-link " href="/postgraphile/examples/" data-reactid="67"><span data-reactid="68"><strong>Example Gallery</strong></span></a></li><li class="f6 lh-copy pv1" data-reactid="69"><a class="nav-link " href="/postgraphile/usage/" data-reactid="70"><span data-reactid="71">Usage</span></a><ul class="page-list nav flex-column null" data-reactid="72"><li class="f6 lh-copy pv1" data-reactid="73"><a class="nav-link " href="/postgraphile/usage-cli/" data-reactid="74"><span data-reactid="75">CLI Usage</span></a></li><li class="f6 lh-copy pv1" data-reactid="76"><a class="nav-link " href="/postgraphile/usage-library/" data-reactid="77"><span data-reactid="78">Library Usage</span></a></li><li class="f6 lh-copy pv1" data-reactid="79"><a class="nav-link " href="/postgraphile/usage-schema/" data-reactid="80"><span data-reactid="81">Schema-only Usage</span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="82"><a class="nav-link " href="/postgraphile/performance/" data-reactid="83"><span data-reactid="84">Performance</span></a></li><li class="f6 lh-copy pv1" data-reactid="85"><a class="nav-link " href="/postgraphile/requirements/" data-reactid="86"><span data-reactid="87">Requirements</span></a></li></ul></div></section><section data-reactid="88"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="89"><span data-reactid="90">Operation</span></h4><div class="nested-list-reset" data-reactid="91"><ul class="page-list nav flex-column mb5" data-reactid="92"><li class="f6 lh-copy pv1" data-reactid="93"><a class="nav-link " href="/postgraphile/quick-start-guide/" data-reactid="94"><span data-reactid="95">Quick Start Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="96"><a class="nav-link " href="/postgraphile/namespaces/" data-reactid="97"><span data-reactid="98">Namespaces</span></a></li><li class="f6 lh-copy pv1" data-reactid="99"><a class="nav-link " href="/postgraphile/inflection/" data-reactid="100"><span data-reactid="101">Inflection</span></a></li><li class="f6 lh-copy pv1" data-reactid="102"><a class="nav-link " href="/postgraphile/tables/" data-reactid="103"><span data-reactid="104">Tables</span></a><ul class="page-list nav flex-column null" data-reactid="105"><li class="f6 lh-copy pv1" data-reactid="106"><a class="nav-link " href="/postgraphile/relations/" data-reactid="107"><span data-reactid="108">Relations</span></a></li><li class="f6 lh-copy pv1" data-reactid="109"><a class="nav-link " href="/postgraphile/connections/" data-reactid="110"><span data-reactid="111">Connections</span></a></li><li class="f6 lh-copy pv1" data-reactid="112"><a class="nav-link " href="/postgraphile/filtering/" data-reactid="113"><span data-reactid="114">Filtering</span></a></li><li class="f6 lh-copy pv1" data-reactid="115"><a class="nav-link " href="/postgraphile/crud-mutations/" data-reactid="116"><span data-reactid="117">CRUD Mutations</span></a></li><li class="f6 lh-copy pv1" data-reactid="118"><a class="nav-link " href="/postgraphile/node-id/" data-reactid="119"><span data-reactid="120">nodeId / id</span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="121"><a class="nav-link " href="/postgraphile/functions/" data-reactid="122"><span data-reactid="123">Functions</span></a><ul class="page-list nav flex-column null" data-reactid="124"><li class="f6 lh-copy pv1" data-reactid="125"><a class="nav-link " href="/postgraphile/computed-columns/" data-reactid="126"><span data-reactid="127">Computed Columns</span></a></li><li class="f6 lh-copy pv1" data-reactid="128"><a class="nav-link " href="/postgraphile/custom-queries/" data-reactid="129"><span data-reactid="130">Custom Queries</span></a></li><li class="f6 lh-copy pv1" data-reactid="131"><a class="nav-link " href="/postgraphile/custom-mutations/" data-reactid="132"><span data-reactid="133">Custom Mutations</span></a></li><li class="f6 lh-copy pv1" data-reactid="134"><a class="nav-link " href="/postgraphile/function-restrictions/" data-reactid="135"><span data-reactid="136">Function Restrictions</span></a></li><li class="f6 lh-copy pv1" data-reactid="137"><a class="nav-link " href="/postgraphile/function-gallery/" data-reactid="138"><span data-reactid="139"><strong>Function Gallery</strong></span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="140"><a class="nav-link " href="/postgraphile/postgresql-indexes/" data-reactid="141"><span data-reactid="142">PostgreSQL Indexes</span></a></li><li class="f6 lh-copy pv1" data-reactid="143"><a class="nav-link " href="/postgraphile/security/" data-reactid="144"><span data-reactid="145">Security</span></a></li><li class="f6 lh-copy pv1" data-reactid="146"><a class="nav-link " href="/postgraphile/subscriptions/" data-reactid="147"><span data-reactid="148">Subscriptions</span></a></li><li class="f6 lh-copy pv1" data-reactid="149"><a class="nav-link " href="/postgraphile/reserved-keywords/" data-reactid="150"><span data-reactid="151">Reserved Keywords</span></a></li><li class="f6 lh-copy pv1" data-reactid="152"><a class="nav-link " href="/postgraphile/debugging/" data-reactid="153"><span data-reactid="154">Debugging</span></a></li></ul></div></section><section data-reactid="155"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="156"><span data-reactid="157">Customising</span></h4><div class="nested-list-reset" data-reactid="158"><ul class="page-list nav flex-column mb5" data-reactid="159"><li class="f6 lh-copy pv1" data-reactid="160"><a class="nav-link " href="/postgraphile/smart-comments/" data-reactid="161"><span data-reactid="162">Smart Comments</span></a></li><li class="f6 lh-copy pv1" data-reactid="163"><a class="nav-link " href="/postgraphile/extending/" data-reactid="164"><span data-reactid="165">Schema Plugins</span></a><ul class="page-list nav flex-column null" data-reactid="166"><li class="f6 lh-copy pv1" data-reactid="167"><a class="nav-link " href="/postgraphile/make-extend-schema-plugin/" data-reactid="168"><span data-reactid="169">makeExtendSchemaPlugin</span></a></li><li class="f6 lh-copy pv1" data-reactid="170"><a class="nav-link " href="/postgraphile/make-add-inflectors-plugin/" data-reactid="171"><span data-reactid="172">makeAddInflectorsPlugin</span></a></li><li class="f6 lh-copy pv1" data-reactid="173"><a class="nav-link " href="/postgraphile/extending-raw/" data-reactid="174"><span data-reactid="175">Graphile Engine</span></a></li><li class="f6 lh-copy pv1" data-reactid="176"><a class="nav-link " href="/postgraphile/plugin-gallery/" data-reactid="177"><span data-reactid="178"><strong>Plugin Gallery</strong></span></a></li></ul></li><li class="f6 lh-copy pv1" data-reactid="179"><a class="nav-link " href="/postgraphile/plugins/" data-reactid="180"><span data-reactid="181">Server Plugins</span></a></li></ul></div></section><section data-reactid="182"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="183"><span data-reactid="184">Guides</span></h4><div class="nested-list-reset" data-reactid="185"><ul class="page-list nav flex-column mb5" data-reactid="186"><li class="f6 lh-copy pv1" data-reactid="187"><a class="nav-link " href="/postgraphile/evaluating/" data-reactid="188"><span data-reactid="189">Evaluating for your Project</span></a></li><li class="f6 lh-copy pv1" data-reactid="190"><a class="nav-link " href="/postgraphile/postgresql-schema-design/" data-reactid="191"><span data-reactid="192">PostgreSQL Schema Design</span></a></li><li class="f6 lh-copy pv1" data-reactid="193"><a class="nav-link " href="/postgraphile/production/" data-reactid="194"><span data-reactid="195">Production Considerations</span></a></li><li class="f6 lh-copy pv1" data-reactid="196"><a class="nav-link " href="/postgraphile/jwt-guide/" data-reactid="197"><span data-reactid="198">PostGraphile JWT Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="199"><a class="nav-link " href="/postgraphile/jwk-verification/" data-reactid="200"><span data-reactid="201">JWK Verification (e.g. Auth0)</span></a></li><li class="f6 lh-copy pv1" data-reactid="202"><a class="nav-link " href="/postgraphile/default-role/" data-reactid="203"><span data-reactid="204">The Default Role</span></a></li><li class="f6 lh-copy pv1" data-reactid="205"><a class="nav-link active" href="/postgraphile/v4-new-features/" data-reactid="206"><span data-reactid="207">v4 Feature Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="208"><a class="nav-link " href="/postgraphile/v3-migration/" data-reactid="209"><span data-reactid="210">v3 → v4 Migration Guide</span></a></li><li class="f6 lh-copy pv1" data-reactid="211"><a class="nav-link " href="/postgraphile/testing-jest/" data-reactid="212"><span data-reactid="213">Testing with Jest</span></a></li></ul></div></section><section data-reactid="214"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="215"><span data-reactid="216">Community</span></h4><div class="nested-list-reset" data-reactid="217"><ul class="page-list nav flex-column mb5" data-reactid="218"><li class="f6 lh-copy pv1" data-reactid="219"><a class="nav-link " href="/postgraphile/community-plugins/" data-reactid="220"><span data-reactid="221">Community Plugins</span></a></li><li class="f6 lh-copy pv1" data-reactid="222"><a class="nav-link " href="/postgraphile/community-chat/" data-reactid="223"><span data-reactid="224">Community Chat</span></a></li><li class="f6 lh-copy pv1" data-reactid="225"><a class="nav-link " href="/postgraphile/code-of-conduct/" data-reactid="226"><span data-reactid="227">Code of Conduct</span></a></li></ul></div></section><section data-reactid="228"><h4 class="f6 ttu fw6 mt0 mb3 bb pb2" data-reactid="229"><span data-reactid="230">FAQ</span></h4><div class="nested-list-reset" data-reactid="231"><ul class="page-list nav flex-column mb5" data-reactid="232"><li class="f6 lh-copy pv1" data-reactid="233"><a class="nav-link " href="/postgraphile/introspection/" data-reactid="234"><span data-reactid="235">Introspection?</span></a></li><li class="f6 lh-copy pv1" data-reactid="236"><a class="nav-link " href="/postgraphile/why-nullable/" data-reactid="237"><span data-reactid="238">Why is it nullable?</span></a></li><li class="f6 lh-copy pv1" data-reactid="239"><a class="nav-link " href="/postgraphile/versioning-policy/" data-reactid="240"><span data-reactid="241">Versioning policy?</span></a></li></ul></div></section></aside><div class="col-xs-12 col-md-9 first-xs main-content" data-reactid="242"><div class="row" data-reactid="243"><div class="col-xs-12" style="width:100%;" data-reactid="244"><div class="edit-this-page" style="display:;" data-reactid="245"><a href="https://github.com/graphile/graphile.github.io/edit/develop/src/pages/postgraphile/v4-new-features.md" data-reactid="246">📝 Suggest improvements to this page</a></div><div data-reactid="247"><h2 id="v4-feature-guide"><a href="#v4-feature-guide" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>v4 Feature Guide</h2>
<p>Though the entry point to v4 is almost identical to v3 (with a few additional
options!), the guts of PostGraphile have been re-written from the ground up -
about 80% of the codebase has been replaced with the new Graphile Engine
system which is plugin-based.</p>
<p>Despite this huge change, v4 is still broadly compatible with v3; you can
read more about migrating from v3 to v4 in our <a href="/postgraphile/v3-migration/">migration
guide</a>.</p>
<p><strong>Headlines</strong>:</p>
<ul>
<li>🚀🚀🚀 Massively improved base performance: up to 55x faster, 90% reduced RAM, 1/20th latency</li>
<li>Cluster mode (<code class="language-text">--cluster-workers 4</code>) for even greater performance still (uses more cores, RAM)</li>
<li>Plugin system - no need to maintain a fork; mix and match additional functionality</li>
<li>
<p>Tidier schema:</p>
<ul>
<li>PostgreSQL extension resources automatically omitted (disable with <code class="language-text">--include-extension-resources</code>)</li>
<li>with <code class="language-text">--no-ignore-rbac</code>, automatically omit tables and columns you don't have permission to access</li>
<li><a href="/postgraphile/smart-comments/">smart comments</a> for omitting, renaming and deprecating things easily</li>
<li>
<p><a href="/postgraphile/inflection/">write your own naming functions</a> if you don't like the built in ones!</p>
<ul>
<li><code class="language-text">userByAuthorId</code> becomes just <code class="language-text">author</code> with the help of <code class="language-text">@graphile-contrib/pg-simplify-inflector</code></li>
</ul>
</li>
</ul>
</li>
<li>One-to-one relationships detected correctly (connection interface still present but deprecated)</li>
<li>Simple collections: option to avoid <code class="language-text">edges</code> / <code class="language-text">nodes</code> should you so desire</li>
<li>GraphQL query batching</li>
<li><code class="language-text">orderBy</code> more than one column </li>
<li>GraphiQL improvements around watch mode</li>
<li>Introspection cache (<code class="language-text">--read-cache</code> / <code class="language-text">--write-cache</code>)</li>
<li>Better errors - with details on why it's occurred and often hints on how to fix!</li>
<li>Support for PostgreSQL v10 identity columns</li>
<li>Support for actually starting against PostgreSQL v11</li>
<li>Support for <code class="language-text">pg@7.x</code> npm module</li>
<li>Support for <code class="language-text">graphql@0.13.x</code></li>
<li>PostGraphileRC configuration file</li>
<li>CLI <code class="language-text">--no-server</code> option for writing out GraphQL schema and exiting</li>
<li>Better support for common envvars</li>
<li>TypeScript typings bundled</li>
<li>Lots more hidden features</li>
<li>Many many many many fixes</li>
<li>Much better PostgreSQL feature support</li>
</ul>
<hr>
<h3 id="performance-goodbye-n1-queries"><a href="#performance-goodbye-n1-queries" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Performance: goodbye N+1 queries!</h3>
<p>The performance of PostGraphile has massively increased over PostGraphQL v3;
and the memory usage has decreased too! If you run your database and
PostGraphile on different servers then you should find query times are improved
even further by the (significant!) reduction in the number of SQL queries that
we generate.</p>
<p>I created an <a href="https://github.com/graphile/postgraphile_changes/blob/master/db/reset.sh">example database
schema</a>
based on the forum example (but with some bells and whistles), filled it with
some data, and then benchmarked a <a href="https://github.com/graphile/postgraphile_changes/tree/master/graphql">number of queries</a>
against it (running everything locally on my machine (a 2011 iMac), using the
latest LTS release of Node.js for both v3 and v4).</p>
<p>The most extreme improvements came in the form of
<a href="https://github.com/graphile/postgraphile_changes/blob/master/graphql/ThreadViewWithEmoji.graphql">ThreadViewWithEmoji.graphql</a>.
This is a query that emulates loading the data to show a single thread page
within a complex forum - the thread itself (and its author), plus the first 20
posts within that thread, their authors, and the emoji responses that each of
the posts have received. It uses a computed column for the user <code class="language-text">fullName</code>s,
but other than that it's just regular relations. Here's the results of v4 vs
v3 for this query:</p>
<ul>
<li>at concurrency = 1: 12x more requests/second, 90% reduction in RAM usage, and less than 1/10th the latency</li>
<li>at concurrency = 10: 17x more requests/second, 92% reduction in RAM usage, and nearly 1/20th the latency</li>
<li>at concurrency = 100: 55x more requests/second, 91% reduction in RAM usage, and around 1/40th the latency</li>
</ul>
<p>Simpler queries still reveal good performance improvements. All in all,
PostGraphile v4 is capable of scaling much better than v3. There's still
lots of performance improvements to be made - we're not resting on our
laurels!</p>
<h3 id="plugins-plugins-plugins"><a href="#plugins-plugins-plugins" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins plugins plugins</h3>
<p>PostGraphile's schema generation (and even the introspection itself!) are now
provided by a number of Graphile Engine plugins. Graphile Engine was invented
for PostGraphile (though it is also suitable for use in other GraphQL
projects) to enable easy extensibility of the core system. This means we can
now have community led feature development such as
<a href="https://github.com/mattbretl/postgraphile-plugin-connection-filter">postgraphile-plugin-connection-filter</a>
(which adds a much more powerful filter engine to PostGraphile that the built
in <code class="language-text">condition</code> argument) without having to have users maintain forks of the
project. These plugins can be maintained separately, and might be merged into
core at a later point.</p>
<p>It's also possible to turn off, or even replace, built in plugins - and of
course to add your own. So you can really customise PostGraphile now! See
<a href="/postgraphile/extending/">Schema Plugins</a> for more information.</p>
<h3 id="tidier-schema"><a href="#tidier-schema" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tidier schema</h3>
<p>PostGraphile no longer includes resources from extensions automatically, so
your schema by default only includes the functionality you've added yourself.
(Go back to the old behaviour with <code class="language-text">--include-extension-resources</code>.)</p>
<p>We highly recommend you enable the new <code class="language-text">--no-ignore-rbac</code> option which tells
PostGraphile to omit anything from your GraphQL schema that you do not have
access to. This means that if you only do <code class="language-text">GRANT UPDATE (name, bio) ON users
TO graphql_visitor;</code> then the update mutation will only expose the <code class="language-text">name</code> and
<code class="language-text">bio</code> fields. No more useless GraphQL fields that throw errors when you
attempt to use them! This option will probably be enabled by default in v5.</p>
<h3 id="omitting-things"><a href="#omitting-things" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Omitting things</h3>
<p>If there's something (a column, table, function, filter, relation) that you
don't want to express to GraphQL you can now remove it using our <a href="/postgraphile/smart-comments/">smart
comments</a> feature. This feature is highly
flexible, so get in touch if you can think of more ways for it to help you
build your perfect schema!</p>
<h3 id="deprecating-tablescolumnsfunctions"><a href="#deprecating-tablescolumnsfunctions" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deprecating tables/columns/functions</h3>
<p>It's also possible to deprecate fields, tables, functions, etc by adding a
"smart comment"; e.g.</p>
<div class="gatsby-highlight">
      <pre class="language-sql"><code class="language-sql"><span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> c<span class="token punctuation">.</span>person<span class="token punctuation">.</span>site <span class="token operator">is</span> E<span class="token string">'@deprecated Use `website` instead\nThe user'</span><span class="token string">'s homepage'</span><span class="token punctuation">;</span></code></pre>
      </div>
<h3 id="naming-things"><a href="#naming-things" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Naming things</h3>
<p>You no longer have to trust us to come up with the best names for your
fields. You can override individual fields using our <a href="/postgraphile/smart-comments/">smart
comments</a> feature, or override the names that
we auto-generate by using a plugin to <a href="/postgraphile/inflection/">override our
inflectors</a> with your own.</p>
<p>These naming overrides can be shared like other plugins, for example I've
<a href="https://github.com/graphile-contrib/pg-simplify-inflector">written
<code class="language-text">@graphile-contrib/pg-simplify-inflector</code></a>
which changes fields like <code class="language-text">userByAuthorId: User</code> into simply <code class="language-text">author: User</code> -
I recommend you check it out.</p>
<h3 id="one-to-one-relationships"><a href="#one-to-one-relationships" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>One-to-one relationships</h3>
<p>If you have tables like this:</p>
<div class="gatsby-highlight">
      <pre class="language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> foo <span class="token punctuation">(</span>
  id <span class="token keyword">serial</span> <span class="token keyword">primary</span> <span class="token keyword">key</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> bar <span class="token punctuation">(</span>
  foo_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">references</span> foo<span class="token punctuation">,</span>
  name <span class="token keyword">text</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>in V3 the one-to-one nature of the relationship was not accounted for, so you would have to query like:</p>
<div class="gatsby-highlight">
      <pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  fooById<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment"># Due to this being one-to-one, at most one row would ever be returned,</span>
    <span class="token comment"># however we didn't account for this and returned a connection anyway</span>
<span class="gatsby-highlight-code-line">    barsByFooId <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">      edges <span class="token punctuation">{</span>
</span><span class="gatsby-highlight-code-line">        node <span class="token punctuation">{</span>
</span>          name
<span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span>
</span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span>
</span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>with v4's native support for these relations you can now use this much neater query:</p>
<div class="gatsby-highlight">
      <pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  fooById<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    barByFooId <span class="token punctuation">{</span>
</span>      name
<span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span>
</span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>No more unnecessary indirection!</p>
<p>Don't worry though, we still have the old relation too (to prevent this being a breaking change), we've just deprecated it so it won't show up by default in autocomplete/documentation/etc.</p>
<h3 id="simple-collections"><a href="#simple-collections" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simple collections</h3>
<p>PostGraphile has long supported Relay-compatible connections, but it now
supports simple list-based collections too. They're disabled by default, but
you can enable both interfaces with <code class="language-text">--simple-collections both</code> or use the
simpler interface exclusively with <code class="language-text">--simple-collections only</code>.</p>
<h3 id="graphql-query-batching"><a href="#graphql-query-batching" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GraphQL query batching</h3>
<p>With the <code class="language-text">--enable-query-batching</code> option for <a href="/postgraphile/usage-cli/">the
CLI</a>; or <code class="language-text">enableQueryBatching: true</code> for the
<a href="/postgraphile/usage-library/">library</a> you can enable our experimental Query
Batching support.</p>
<p>Your GraphQL client will need query batching support to make use of
this (non-batched queries still work fine).</p>
<p>For Apollo, you can use the
<a href="https://www.apollographql.com/docs/link/links/batch-http.html">BatchHttpLink</a>
link - something like:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'apollo-client'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BatchHttpLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"apollo-link-batch-http"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> link <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BatchHttpLink</span><span class="token punctuation">(</span><span class="token punctuation">{</span> uri<span class="token punctuation">:</span> <span class="token string">"/graphql"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  link<span class="token punctuation">,</span>
  <span class="token comment">// other options like cache</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<h3 id="order-order"><a href="#order-order" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Order! Order!</h3>
<p>Connections now support ordering by an array of columns rather than just one -
a much requested feature!</p>
<h3 id="cache-invalidation-serverless"><a href="#cache-invalidation-serverless" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cache invalidation (Serverless)</h3>
<p>People have been running PostGraphile on AWS Lambda and similar environments, and one of the common issues that I hear is that boot up time is too slow. V4 addresses this in two ways:</p>
<ol>
<li>we offer the <code class="language-text">--read-cache</code> and <code class="language-text">--write-cache</code> options that allow plugins (including the introspection plugin!) to cache work that they do up front - note that we do <em>not</em> handle invalidating this cache, so that remains your responsibility.</li>
<li>by changing the minimum requirements of PostGraphile to Node.js 8.6 we can make use of native async/await support, resulting in much less code for Node to parse and execute.</li>
</ol>
<h3 id="better-support-better-errors"><a href="#better-support-better-errors" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better support, better errors</h3>
<ul>
<li>Many previously invalid enums are now made valid</li>
<li>When the introspection results in an empty name, an error is thrown explaining why</li>
<li>When schema building results in a naming clash, an error it thrown explaining where the two names originated, and even hinting how to fix the issue</li>
<li>When you specify <code class="language-text">--schema</code> and that schema doesn't exist, you will be warned</li>
<li>Tables that end in <code class="language-text">_input</code> or <code class="language-text">_patch</code> are renamed to FooInputRecord or similar to avoid clashes with mutation types on other tables</li>
<li>Support <code class="language-text">point</code>, <code class="language-text">hstore</code> and <code class="language-text">inet</code> types</li>
</ul>
<h3 id="column-level-select-grants-may-now-work"><a href="#column-level-select-grants-may-now-work" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Column-level SELECT grants may now work</h3>
<p>As part of the performance work, we now select only the fields we need (and
we also inline computed columns, in case you're interested!). As such, if you
have column-level SELECT grants you may find that this works with
PostGraphile now. Note, however, that this will not work with PostGraphile's
default mutations, nor with some computed columns. We do not recommend using
column-level SELECT grants - instead split your concerns into multiple tables
and use the one-to-one relationship feature to link them.</p>
<h3 id="pg7x-and-duck-typed-pg"><a href="#pg7x-and-duck-typed-pg" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>pg@7.x and duck-typed pg</h3>
<p>In v3 it was quite common to have conflicts with <code class="language-text">pg</code> - where you had your own
version installed, and PostGraphile installed it's own version, and when you
passed a pgPool over to PostGraphile it would throw an error. Well no more! We
now look at the pgPool you've handed us and if it quacks like <del>a duck</del>
<code class="language-text">pg.Pool</code> then we'll trust you and treat it as a pg.Pool.</p>
<h3 id="lots-of-hidden-features"><a href="#lots-of-hidden-features" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lots of hidden features</h3>
<p>There's absolutely loads of things going on under the hood that we've not
officially exposed yet. You can use some of this goodness (e.g.
<code class="language-text">pgColumnFilter</code>) by tapping into the <code class="language-text">graphileBuildOptions</code> setting, but
you'll currently have to go digging to see what they are and how they work; and
until they're documented they're seen as experimental so there's no guarantees
that they won't be removed or modified.</p>
<ul>
<li><code class="language-text">handleErrors</code> for overriding how errors are output</li>
<li><code class="language-text">X-GraphQL-Event-Stream</code> header support</li>
<li>using variables in JSON subfields</li>
<li><code class="language-text">prettier</code> for code formatting</li>
</ul></div></div><br data-reactid="248"/><br data-reactid="249"/><div class="col-xs-12 mt3 mb5" data-reactid="250"><div class="row between-xs" data-reactid="251"><div class="col-xs-6" data-reactid="252"><a class="" href="/postgraphile/default-role/" data-reactid="253"><span class="fas fa-fw fa-arrow-left" data-reactid="254"></span><!-- react-text: 255 --> <!-- /react-text --><span data-reactid="256">The Default Role</span></a></div><div class="col-xs-6 tr" data-reactid="257"><a class="" href="/postgraphile/v3-migration/" data-reactid="258"><span data-reactid="259">v3 → v4 Migration Guide</span><!-- react-text: 260 --> <!-- /react-text --><span class="fas fa-fw fa-arrow-right" data-reactid="261"></span></a></div></div></div></div></div></div></div></section><section class="mailinglist" data-reactid="262"><div class="container" data-reactid="263"><div class="row" data-reactid="264"><div class="col-xs-12" data-reactid="265"><div class="hero-block" data-reactid="266"><h3 data-reactid="267"><!-- react-text: 268 -->Questions, comments or feedback?<!-- /react-text --><br data-reactid="269"/><!-- react-text: 270 -->Email<!-- /react-text --><!-- react-text: 271 --> <!-- /react-text --><a href="mailto:info@graphile.org?subject=Documentation%20question/comment/feedback:)" data-reactid="272">info@graphile.org</a></h3><form action="//graphile.us16.list-manage.com/subscribe/post?u=d103f710cf00a9273b55e8e9b&amp;id=c3a9eb5c4e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="273"><div id="mc_embed_signup_scroll" class="center hero-block" data-reactid="274"><p data-reactid="275">Keep up to date on Graphile and PostGraphile features/changes. Subscribe to our occasional announcements newsletter:</p><div class="mc-field-group form-inline justify-content-center" data-reactid="276"><div class="form-group" data-reactid="277"><div class="mb2" data-reactid="278"><label class="label--small" for="mce-EMAIL" data-reactid="279">Email address:</label></div><input type="email" autocapitalize="off" autocomplete="off" autocorrect="off" class="input-text mb0-ns mb1" id="mce-EMAIL" name="EMAIL" spellcheck="false" value="" data-reactid="280"/><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="281"><input type="text" name="b_d103f710cf00a9273b55e8e9b_c3a9eb5c4e" tabindex="-1" value="" data-reactid="282"/></div><input type="submit" class="button--solid" id="mc-embedded-subscribe" name="subscribe" value="Subscribe" data-reactid="283"/></div><div id="mce-responses" class="clear" data-reactid="284"><div class="response" id="mce-error-response" style="display:none;" data-reactid="285"></div><div class="response" id="mce-success-response" style="display:none;" data-reactid="286"></div></div></div></div></form></div></div></div></div></section></div><footer class="bg-white pv5 bt b--black f6 lh-copy" data-reactid="287"><div class="container" data-reactid="288"><div class="row" data-reactid="289"><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="290"><h6 data-reactid="291">PostGraphile</h6><ul data-reactid="292"><li data-reactid="293"><a href="/postgraphile/introduction/" data-reactid="294">Introduction</a></li><li data-reactid="295"><a href="/postgraphile/security/" data-reactid="296">Security</a></li><li data-reactid="297"><a href="/postgraphile/extending/" data-reactid="298">Extending</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset " data-reactid="299"><h6 data-reactid="300">Graphile Engine</h6><ul data-reactid="301"><li data-reactid="302"><a href="/graphile-build/" data-reactid="303">About</a></li><li data-reactid="304"><a href="/graphile-build/getting-started/" data-reactid="305">Getting Started</a></li><li data-reactid="306"><a href="/graphile-build/plugins/" data-reactid="307">Plugins</a></li></ul></div><div class="col-xs-12 col-md-2 nested-list-reset" data-reactid="308"><h6 data-reactid="309">Resources</h6><ul data-reactid="310"><li data-reactid="311"><a href="/news/" data-reactid="312"><i class="fas fa-bullhorn" data-reactid="313"></i><!-- react-text: 314 --> News<!-- /react-text --></a></li><li data-reactid="315"><a href="https://github.com/graphile" data-reactid="316"><i class="fab fa-github" data-reactid="317"></i><!-- react-text: 318 --> GitHub<!-- /react-text --></a></li><li data-reactid="319"><a href="http://discord.gg/graphile" data-reactid="320"><i class="fab fa-discord" data-reactid="321"></i><!-- react-text: 322 --> Chat (discord)<!-- /react-text --></a></li><li data-reactid="323"><a href="https://twitter.com/benjie" data-reactid="324"><i class="fab fa-twitter" data-reactid="325"></i><!-- react-text: 326 --> Twitter<!-- /react-text --></a></li><li data-reactid="327"><a href="/news/press-kit/" data-reactid="328"><i class="fas fa-file-archive" data-reactid="329"></i><!-- react-text: 330 --> Logos/etc<!-- /react-text --></a></li></ul></div><div class="col-xs-12 col-md-offset-1 col-md-5" data-reactid="331"><h6 data-reactid="332">About</h6><!-- react-text: 333 -->PostGraphile and Graphile Build are Open Source Software, developed and maintained by <!-- /react-text --><a href="https://twitter.com/benjie" data-reactid="334">@Benjie</a><!-- react-text: 335 --> <!-- /react-text --><!-- react-text: 336 -->with the help of the community.<!-- /react-text --><br data-reactid="337"/><br data-reactid="338"/><!-- react-text: 339 -->You can support the projects via<!-- /react-text --><!-- react-text: 340 --> <!-- /react-text --><a href="https://www.patreon.com/benjie" target="_blank" rel="noopener noreferrer" data-reactid="341">Patreon</a><!-- react-text: 342 -->, by <!-- /react-text --><a href="/postgraphile/pricing/" data-reactid="343">going Pro</a><!-- react-text: 344 -->, or by paying for <!-- /react-text --><a href="/support/" data-reactid="345">Professional Services</a><!-- react-text: 346 -->. Your support is gratefully received 🙏<!-- /react-text --><br data-reactid="347"/><br data-reactid="348"/><!-- react-text: 349 -->This site is copyright © Benjie Gillam <!-- /react-text --><!-- react-text: 350 -->2018<!-- /react-text --><!-- react-text: 351 -->. Design and logos copyright © Benjie Gillam and Jof Arnold<!-- /react-text --><!-- react-text: 352 --> <!-- /react-text --><!-- react-text: 353 -->2018<!-- /react-text --><!-- react-text: 354 -->.<!-- /react-text --><br data-reactid="355"/><br data-reactid="356"/><!-- react-text: 357 -->Corrections and contributions to this website are gratefully received via<!-- /react-text --><!-- react-text: 358 --> <!-- /react-text --><a href="https://github.com/graphile/graphile.github.io" data-reactid="359">its GitHub repository</a><!-- react-text: 360 -->.<!-- /react-text --><br data-reactid="361"/><br data-reactid="362"/><!-- react-text: 363 -->PostGraphile was <!-- /react-text --><a href="/history/" data-reactid="364">originally authored</a><!-- react-text: 365 --> as PostGraphQL by<!-- /react-text --><!-- react-text: 366 --> <!-- /react-text --><a href="https://twitter.com/calebmer" data-reactid="367">Caleb Meredith</a><!-- react-text: 368 -->.<!-- /react-text --></div></div></div></footer></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-1b68f72edc9b9cfdf508.js","96961042003272":"component---src-templates-page-js-6df43615680729d980c3.js","59784799166159":"component---src-templates-marketing-js-1db22aaf97ede6309720.js","60335399758886":"path----557518bd178906f8d58a.js","45788430371641":"path---history-3f3033247171c9006afa.js","192423053311925":"path---graphile-build-pg-security-e91a57eca10330c6d1fc.js","194808618595402":"path---graphile-build-pg-settings-f835ccda90b309dde07b.js","128602041518144":"path---graphile-build-all-hooks-84cb4e425069c9a44895.js","64023390553510":"path---graphile-build-build-object-174fa3fb7d5841c78592.js","69504633912515":"path---graphile-build-context-object-8bd64b0eef0164f5b736.js","125892818282768":"path---graphile-build-default-plugins-9a1ce80d6014362ec1af.js","109947277077173":"path---graphile-build-getting-started-32f9482f9554603db1c5.js","16210746157911":"path---graphile-build-graphile-build-23ce166131fcd0a41d65.js","57552969484094":"path---graphile-build-hooks-97a48654c88f53b38d36.js","109627700230002":"path---graphile-build-f41a9655e0ee6494c60a.js","36474596372704":"path---graphile-build-omitting-plugins-83ee2d18a48733326a96.js","276285638780302":"path---graphile-build-plugin-options-af1ccb64fe05ffc8a116.js","136546493962690":"path---graphile-build-plugins-3cef4c05f4116f4004fd.js","277477532944301":"path---graphile-build-schema-builder-943443ac98516a3fad3d.js","208863975630277":"path---news-d5c233043ef1ff664a37.js","143510993521902":"path---news-postgraphile-version-4-172d83834ed2cf1d7f41.js","72313494074136":"path---news-press-kit-f49a29d3bc2fabeb8190.js","141666846945901":"path---support-bf3737a42974bcc2fcc5.js","235145966638131":"path---postgraphile-code-of-conduct-17a0e9e62d6a317b6c11.js","114781403929568":"path---postgraphile-community-chat-612b76bb42bb938146fe.js","216163489569211":"path---postgraphile-community-plugins-dfd2da18474ee7632105.js","99411096849217":"path---postgraphile-computed-columns-88979f1775d126d13873.js","245194823331250":"path---postgraphile-connections-06cf2175246e662f83c3.js","226259727392765":"path---postgraphile-crud-mutations-055619ef23c9722b9af9.js","209456356109321":"path---postgraphile-custom-mutations-1ac5a01e428fcf7f89b1.js","262226386268176":"path---postgraphile-custom-queries-56303b546128a2f8bcb5.js","58450730530065":"path---postgraphile-debugging-c7b226bf00934197684c.js","183024611244872":"path---postgraphile-default-role-747b99404bb515473657.js","46110498460401":"path---postgraphile-evaluating-b833e7b694231c31afa7.js","235675790195762":"path---postgraphile-examples-6652898193179d6c08f4.js","1465359564156":"path---postgraphile-extending-288bfa94c5f2da1ff519.js","29661158995595":"path---postgraphile-filtering-d067303d06102b8a4420.js","101562502586227":"path---postgraphile-function-gallery-1e4db829282840a95d3f.js","101463202308976":"path---postgraphile-function-restrictions-db62c1aec51ae9e49a11.js","34445096275681":"path---postgraphile-inflection-4ced8881e12b380c9096.js","231292683096477":"path---postgraphile-introduction-19af939257f5455d4517.js","33982096820675":"path---postgraphile-introspection-ee29c3c3e12c2f3d09f7.js","131593726388413":"path---postgraphile-jwk-verification-7cb4208bdac1eeb8f953.js","217512476184238":"path---postgraphile-jwt-guide-4e8a3485cd73858a71bc.js","64254551156649":"path---postgraphile-make-add-inflectors-plugin-3964946bcbf80b153868.js","49645441935291":"path---postgraphile-namespaces-36edfe9a12efa43b2ddb.js","206205697905610":"path---postgraphile-node-id-736601e0dc4f9566df3c.js","245838197689590":"path---postgraphile-performance-a1534c2709468cd3265d.js","193154730806080":"path---postgraphile-plugin-gallery-80e166ce7ea30cd66aec.js","34112019379484":"path---postgraphile-plugins-c2ab102efa7683f57669.js","43306645800525":"path---postgraphile-postgresql-indexes-63946fec661d0ec5e88e.js","257659440118484":"path---postgraphile-procedures-0806b42c6cb7a8bb6dfc.js","20524195157075":"path---postgraphile-quick-start-guide-c8ad6e740b99fcb3e14a.js","136696082986067":"path---postgraphile-relations-e3c7df999beaeadd66c5.js","187294999324209":"path---postgraphile-requirements-b8804747dccf00f08088.js","126695865748518":"path---postgraphile-reserved-keywords-dedae42c2922419ddf2a.js","143935096069691":"path---postgraphile-security-dfe172309c872e4109f4.js","244450434420656":"path---postgraphile-tables-9ee274dad0154493ffd8.js","247601703930759":"path---postgraphile-usage-1a8a69c15b2ef46c4121.js","270428963090724":"path---postgraphile-versioning-policy-0e273639302f45c755e6.js","156260474427399":"path---postgraphile-why-nullable-583703540927ddbc7318.js","76338124382236":"path---graphile-build-look-ahead-c5e39a7de66311b83e31.js","187503077063819":"path---postgraphile-extending-raw-b02692e74f9d057a77d8.js","202678300341359":"path---postgraphile-functions-78d43fc28fd32b3c49ae.js","30601655320255":"path---postgraphile-make-extend-schema-plugin-3b61e6166bae4bbb3586.js","85182451526728":"path---postgraphile-pricing-56f8cb3229fe40a70b8b.js","163587040327238":"path---postgraphile-production-1d5fd94a0de53d9b75fa.js","27297302318019":"path---postgraphile-smart-comments-7cfeb28816e65cd78a52.js","112985368742066":"path---postgraphile-subscriptions-e27899eb583883c906c1.js","174583816914262":"path---postgraphile-testing-jest-31a3f0d40a5b51997c5c.js","3265662318058":"path---postgraphile-usage-cli-ecd4c9ebe64c792d3981.js","148070795768796":"path---postgraphile-usage-library-3c127ffc80a4ebfe4047.js","272066437984048":"path---postgraphile-usage-schema-836ed63c46428d9ff943.js","87638492893048":"path---postgraphile-v-3-migration-39c2dd66a33fd7dba90b.js","57656932303775":"path---postgraphile-v-4-new-features-171417b66cbbbe3941f7.js","142629428675168":"path---index-9af5238ba8a8966def21.js","48764759135427":"path---postgraphile-41f8bb3e02937bae057e.js","17839233601159":"path---postgraphile-postgresql-schema-design-efd46bc4cdbdefa41e88.js","114276838955818":"component---src-layouts-index-js-ace7914a8fea060c15f6.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-e9c5ebe9f9d03df65cb6.js","/app-1b68f72edc9b9cfdf508.js","/path---postgraphile-v-4-new-features-171417b66cbbbe3941f7.js","/component---src-templates-page-js-6df43615680729d980c3.js","/component---src-layouts-index-js-ace7914a8fea060c15f6.js"])/*]]>*/</script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script></body></html>